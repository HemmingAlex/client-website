if (self.CavalryLogger) { CavalryLogger.start_js(["LtdQH"]); }

__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1644150182303893"};b.getQueryID=function(){return"171816796723339"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("CameraPostLoggingEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={SEND_REPLY_ATTEMPT:"send_direct_reply_attempted",SEND_REPLY_SUCCESS:"send_direct_reply_success",SEND_REPLY_FAILURE:"send_direct_reply_failure",THREAD_VIEWED:"view",THREAD_MARK_SEEN_ATTEMPT:"mark_thread_seen_attempted",THREAD_MARK_SEEN_SUCCESS:"mark_thread_seen_success",THREAD_MARK_SEEN_FAILURE:"mark_thread_seen_failure",DIRECT_VIEWER_CLICKOUT:"clickout"}}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2217242731640138"};b.getQueryID=function(){return"2218304265112137"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1494166853955273"};b.getQueryID=function(){return"1468697053209427"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1459763854077111"};b.getQueryID=function(){return"1849675045338105"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1652248708148952"};b.getQueryID=function(){return"143159039576179"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("CameraPostGraphQLAPI",["Banzai","CameraPostDirectMarkSeenMutationWebGraphQLMutation","CameraPostLoggingEvents","CameraPostQueryWebGraphQLQuery","CameraPostRepliesQueryWebGraphQLQuery","CameraPostReplyMutationWebGraphQLMutation","CameraPostUserQueryWebGraphQLQuery","DirectMessagingTypedLogger","FBStoriesLoggingConstants","WebGraphQL","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c,d,e,f,g,h){__p&&__p();if(e!=null){var i=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(e).setCardID(a.toString());if(d.message){var j=d.message.length;i.setMessageLength(j)}h&&i.setReplyType(h);d.sticker_id&&i.addToExtraData("sticker_id",d.sticker_id);d.gif_url&&i.addToExtraData("gif_url",d.gif_url);i.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:e,thread_id:String(a)})}var k={};k.is_fb_story=!0;k.thread_id=a;k.camera_post_type=c;k.attempt_name=e;k.event=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT;return b("WebGraphQL").exec(new(b("CameraPostReplyMutationWebGraphQLMutation"))({input:d})).then(function(d){if(f!=null){var e=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(f).setCardID(a.toString());h&&e.setReplyType(h);e.log()}k.success_name=f;b("Banzai").post("fb_stories_banzai_generic",{ft:k});return d},function(d){if(g!=null){var e=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(g).setCardID(a.toString());h&&e.setReplyType(h);e.log()}k.failure_name=g;b("Banzai").post("fb_stories_banzai_generic",{ft:k});return d})};e.exports={sendDirectMessageReply:function(a,c,d,e,f){var h=b("uuid")();h={client_mutation_id:h,actor_id:a,thread_id:c,message:d};a=null;d=null;var i=null;f?a=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT:(a=b("CameraPostLoggingEvents").SEND_REPLY_ATTEMPT,d=b("CameraPostLoggingEvents").SEND_REPLY_SUCCESS,i=b("CameraPostLoggingEvents").SEND_REPLY_FAILURE);return g(c,e,h,a,d,i)},sendDirectStickerReply:function(a,c,d,e){var f=b("uuid")();f={client_mutation_id:f,actor_id:a,thread_id:c,sticker_id:e};return g(c,d,f,null,null,null)},sendDirectGifReply:function(a,c,d,e){var f=b("uuid")();f={client_mutation_id:f,actor_id:a,thread_id:c,gif_url:e};return g(c,d,f,null,null,null)},sendLightweightReactionReply:function(a,c,d,e,f){var h="LIGHT_WEIGHT";a={client_mutation_id:b("uuid")(),actor_id:a,thread_id:c,message:e,story_reply_type:h,is_lightweight_reaction:!0,lightweight_reaction_actions:{reaction:e,offsets:[f||0]}};return g(c,d,a,null,null,null,"light_weight")},loadThreadFullInformation:function(a,c){return b("WebGraphQL").exec(new(b("CameraPostQueryWebGraphQLQuery"))({thread_id:c})).then(function(a){var d;d=(d=a)!=null?(d=d.node)!=null?d.camera_post_type:d:d;new(b("DirectMessagingTypedLogger"))().setCameraPostType(d).setName(b("CameraPostLoggingEvents").THREAD_VIEWED).setProductSurface("www").setCardID(c.toString()).log();return a},function(a){return a})},loadUserInfo:function(){return b("WebGraphQL").exec(new(b("CameraPostUserQueryWebGraphQLQuery"))())},loadRepliesForThread:function(a){return b("WebGraphQL").exec(new(b("CameraPostRepliesQueryWebGraphQLQuery"))({thread_id:a}))},markThreadSeen:function(a,c,d,e,f){__p&&__p();var g={};f?g={client_mutation_id:b("uuid")(),actor_id:a,story_id:f,last_message_seen_id:d}:g={client_mutation_id:b("uuid")(),actor_id:a,thread_id:c,last_message_seen_id:d};f=new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT).setProductSurface("www").setCardID(c.toString());f.log();var h={};h.is_fb_story=!0;h.camera_post_type=e;h.event=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT;h.thread_id=c;h.latest_message_id=d;return b("WebGraphQL").exec(new(b("CameraPostDirectMarkSeenMutationWebGraphQLMutation"))({input:g})).then(function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS).setCardID(c.toString()).log();h.sucess_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS;b("Banzai").post("fb_stories_banzai_generic",{ft:h});return a},function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE).setCardID(c.toString()).log();h.failur_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE;b("Banzai").post("fb_stories_banzai_generic",{ft:h});return a})},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()}}}),null);
__d("CameraPostBucketOwnerHelper",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getGender:function(a){return!a?"":a.gender?a.gender:""},isEventHost:function(a){if(!a)return!1;var b=a.event_hosts&&a.event_hosts.edges.some(function(a){return g.isEventHostPageAdmin(a.node)});return!!(a.is_viewer_host||b)},isEventHostPageAdmin:function(a){a=a.page_admin_users;if(!a)return!1;var c=b("CurrentUser").getID();return a.edges.some(function(a){return a.node.id===c})},isViewerFriend:function(a){return!a?!1:a.is_viewer_friend?!!a.is_viewer_friend:!1},isEmployee:function(a){return!a?!1:a.is_employee?!!a.is_employee:!1},getProfilePictureUri:function(a){return!a||!a.profile_picture?"":a.profile_picture.uri||""},getCoverPhotoUri:function(a){return!a||!a.cover_photo?"":((a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a)||""},isViewerPageContentAdmin:function(a){a=g._getViewerProfilePermissions(a);return a&&a.includes("EDIT_PROFILE")||!1},isViewerGroupModerator:function(a){a=g._getViewerAdminType(a);return a==="MODERATOR"},isViewerGroupAdmin:function(a){a=g._getViewerAdminType(a);return a==="ADMIN"},isViewerGroupMember:function(a){return!a||!a.is_viewer_member?!1:a.is_viewer_member},_getViewerProfilePermissions:function(a){return!a||!a.viewer_profile_permissions?null:((a=a)!=null?a.viewer_profile_permissions:a)||null},_getViewerAdminType:function(a){return!a||!a.viewer_admin_type?null:((a=a)!=null?a.viewer_admin_type:a)||null},requiresAdminApproval:function(a){return!a?!1:a.story_approval_required&&!!a.story_approval_required||(a.stories_admin_approval_required_setting?a.stories_admin_approval_required_setting==="ON":!1)},isGroupAdmin:function(a,b){if(!a||!a.group_admin_profiles)return!1;a=((a=a)!=null?(a=a.group_admin_profiles)!=null?a.edges:a:a)||[];a=g._getIdsFromEdges(a);a=new Set(a);return a.has(b)},isGroupMember:function(a,b){b=(b=b.groups)==null?void 0:b.edges;if(b==null)return!1;b=new Set(b.map(function(a){return(a=a.node)==null?void 0:a.id}));return b.has(a.id)},isBuySellGroup:function(a){if(!a||!a.group_purposes)return!1;a=a.group_purposes.edges.map(function(a){return a.node.purpose_enum});return a.includes("for_sale".toUpperCase())},isMutedFromGroup:function(a,b){if(!a||!a.group_muted_members)return!1;a=a.group_muted_members.edges;return g._getIdsFromEdges(a).includes(b)},setIsMutedFromGroup:function(a,b,c){if(!a||!a.group_muted_members)return;var d=a.group_muted_members.edges,e=g.isMutedFromGroup(a,b);c!==e&&(c?d.push({node:{id:b}}):a.group_muted_members={edges:d.filter(function(a){a.node.id!==b})})},_getIdsFromEdges:function(a){return a.map(function(a){return a.node.id})}};e.exports=g}),null);
__d("CameraPostMediaHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getWidth:function(a){if(!a)return 0;if(a.width)return a.width;return a.image?a.image.width||0:0},getHeight:function(a){if(!a)return 0;if(a.height)return a.height;return a.image?a.image.height||0:0},getType:function(a){return((a=a)!=null?a.__typename:a)||""},getImageUri:function(a){return!a?null:a.image?a.image.uri:null},getBlurImageUri:function(a){return!a?null:a.image_blurred?a.image_blurred.uri:null},isSphericalPhoto:function(a){return!a?!1:a.photo_encodings?a.photo_encodings.length>0:!1},isImage:function(a){return g.getType(a)==="Photo"},isVideo:function(a){return g.getType(a)==="Video"},getPreviewImage:function(a){return!a?null:a.preview_image?a.preview_image.uri:null},makeOptimisticPhotoMedia:function(a){return{id:null,message:null,__typename:"Photo",preview_image:{uri:a,width:null,height:null},image:{uri:a,width:null,height:null},image_blurred:{uri:a,width:null,height:null}}},hasObjectionableContent:function(a){if(!a||!g.isImage(a)&&!g.isVideo(a))return!1;a=a.objectionable_content_info?a.objectionable_content_info:null;if(a){a=a.categories;return a&&a.length>0}return!1}};e.exports=g}),null);
__d("CameraPostThreadOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return(a=a)!=null?a.id:a},getName:function(a){return((a=a)!=null?a.name:a)||""},getIsViewerFriend:function(a){return!!((a=a)!=null?a.is_viewer_friend:a)},getProfilePictureUri:function(a){return((a=a)!=null?(a=a.profile_picture)!=null?a.uri:a:a)||""}};e.exports=a}),null);
__d("CameraPostTypesHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isEventStory:function(a){return a==="EVENT_STORY"},isGroupStory:function(a){return a==="GROUP_STORY"},isBirthdayStory:function(a){return a==="BIRTHDAY_STORY"},isMultiAuthor:function(a){return g.isEventStory(a)||g.isGroupStory(a)||g.isBirthdayStory(a)},isPageStory:function(a){return a==="PAGE_STORY"},isPromotionStory:function(a){return a==="PROMOTION_STORY"},isStory:function(a){return a==="STORY"},isStoryNux:function(a){return a==="STORY_NUX"}};e.exports=g}),null);
__d("StoriesNavigationTapTarget.react",["ix","CometDarkModeContext","CometPressable.react","CometPressableOverlay.react","React","StoriesGating","TetraIcon.react","fbicon","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("React").useContext,j=b("React").useState,k={buttonContainer:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",opacity:"l8rlqa9s",position:"pmk7jnqg",top:"rk01pc8j",transform:"ke6wolob",transitionDuration:"ms05siws",transitionProperty:"pnx7fd3z",transitionTimingFunction:"msbwk0y7",willChange:"ejg0drik"},buttonContainerDarkMode:{opacity:"pedkr2u6"},buttonContainerHoverLeft:{opacity:"pedkr2u6",transform:"ghqu56s8"},buttonContainerHoverRight:{opacity:"pedkr2u6",transform:"yiec5hid"},disabled:{opacity:"b5wmifdl",pointerEvents:"hzruof5a"},root:{cursor:"nhd2j8a9",height:"datstx6m",position:"l9j0dhe7",width:"n99xedck"},tapTargetOverlay:{height:"datstx6m",width:"k4urcfbm"}},l={root:{alignItems:"bp9cbjyn",backgroundColor:"cwj9ozl2",borderTopColor:"t51s4qs2",borderEndColor:"bv6zxntz",borderBottomColor:"qc3rp1z7",borderStartColor:"rj06g9kl",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",borderTopStyle:"goun2846",borderEndStyle:"ccm00jje",borderBottomStyle:"s44p3ltw",borderStartStyle:"mk2mc5f4",borderTopWidth:"frvqaej8",borderEndWidth:"ed0hlay0",borderBottomWidth:"afxsp9o4",borderStartWidth:"jcgfde61",boxSizing:"rq0escxv",color:"m9osqain",display:"j83agx80",height:"m7zwrmfr",justifyContent:"taijpn5t",paddingTop:"jb3vyjys",paddingEnd:"rz4wbd8a",paddingBottom:"qt6c0cv9",paddingStart:"a8nywdso",position:"l9j0dhe7",width:"tmrshh9y"}},m=!1,n=!1;function o(a){var b=j(function(){return a?n:m}),c=b[0],d=b[1];a&&n!==c&&d(n);!a&&m!==c&&d(m);b=function(b){a?n=b:m=b,d(b)};return[c,b]}var p=function(a){var c=a.isRightButton?b("fbicon")._(g("492539"),24):b("fbicon")._(g("492491"),24);return b("React").jsx(b("CometPressable.react"),{"aria-label":a.label,display:"inline",onPress:a.onClick,overlayDisabled:!0,testid:a.isRightButton?"viewer_right_button":"viewer_left_button",xstyle:l.root,children:b("React").jsx(b("TetraIcon.react"),{color:"secondary",icon:c,size:24})})};function a(a){var c=a.disabled,d=a.isRightButton,e=a.label;a=a.onClick;var f=o(d),g=f[0],j=f[1];f=i(b("CometDarkModeContext"));f=f.isDarkModeEnabled;return b("React").jsx("div",{className:(h||(h=b("stylex")))(k.root,c&&!b("StoriesGating").isTest()?k.disabled:null),onMouseEnter:function(){j(!0)},onMouseLeave:function(){j(!1)},children:b("React").jsx(b("CometPressable.react"),{focusable:!1,onPress:a,overlayDisabled:!0,xstyle:k.tapTargetOverlay,children:b("React").jsxs("div",{className:h(k.buttonContainer,g&&!d?k.buttonContainerHoverLeft:null,g&&d?k.buttonContainerHoverRight:null,f?k.buttonContainerDarkMode:null),style:{left:d?0:null,marginLeft:d?"40px":"0px",marginRight:d?"0px":"40px",right:d?null:0},children:[b("React").jsx(p,{disabled:c,hovered:g,isRightButton:d,label:e,onClick:a}),b("React").jsx(b("CometPressableOverlay.react"),{hovered:g&&f})]})})})}e.exports=a}),null);
__d("FBStoriesActions",["CameraPostBucketOwnerHelper","CameraPostGraphQLAPI","FBLogger","FBStoriesActionsHelper","FBStoriesActionTypes","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesMutedBucketOwnersActions","FBStoriesPrefetcher","FBStoriesStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch,h={resetStore:function(){g({type:b("FBStoriesActionTypes").RESET_STATE})},loadData:function(a,c,d,e,f){g({type:b("FBStoriesActionTypes").LOADED,data:{userInfo:{userName:a,userID:c,userGender:null,userProfilePic:{uri:d}},userBucketData:null,friendsBucketData:f}})},nextThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.nextBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==void 0?a:d+1;c.length===0?h.nextBucket():a<=c.length-1?h.currentThreadIndexChanged(a):h.nextBucket()},prevThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.prevBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==void 0?a:d-1;c.length===0?h.prevBucket():a>=0?h.currentThreadIndexChanged(a,!0):h.prevBucket()},nextBucket:function(){return h._transitionBucket(!0)},prevBucket:function(){return h._transitionBucket(!1)},userSelectedBucket:function(a){__p&&__p();var c=b("FBStoriesStore").getBucketIndexByBucketId(a);if(c===-1)return!1;var d=b("FBStoriesStore").getUnseenThreadIndex(c),e=Math.max(0,d);a=b("FBStoriesStore").isOwnBucket(a);g({type:b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY});g({type:b("FBStoriesActionTypes").SET_UNSEEN_MODE,value:!a&&d>=0});g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:!1});g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:c});h.currentThreadIndexChanged(e);return!0},updateCurrentThreadPercentDone:function(a){g({type:b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE,percentDone:a})},currentThreadIndexChanged:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=b("FBStoriesStore").isOwnBucket();g({type:b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED,index:a});h.updateCurrentThreadPercentDone(0);a=b("FBStoriesStore").getCurrentThreadData();if(a){if(d&&!a.isLive){var e=a.threadID;b("promiseDone")(b("FBStoriesGraphQLAPI").loadViewerListForThread(e),function(a){return g({type:b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD,threadID:e,data:a})},function(a){return b("FBLogger")("fbstories").catching(a).mustfix("Cannot load viewer list for thread: %s",e)})}h.markCurrentThreadAsSeen();b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket()}else c?h.prevThread():h.nextThread()},markCurrentThreadAsSeen:function(){var a=b("FBStoriesStore").getUserInfo().userID,c=b("FBStoriesStore").getCurrentThreadData();if(!c||c.isLive)return;var d=c.latestMessageID,e=c.cameraPostType;c=c.threadID;g({type:b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC,bucketID:null,threadID:c});b("CameraPostGraphQLAPI").markThreadSeen(a,c,d,e)},markThreadViewersSeen:function(a){g({type:b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC,threadID:a}),b("FBStoriesGraphQLAPI").updateThreadSeenReciept(a)},_transitionBucket:function(a,c){__p&&__p();c=c!==void 0?c:b("FBStoriesStore").getSelectedBucketIndex();c=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(c,a);var d=c.nextBucketIndex;c=c.nextThreadIndex;var e=b("FBStoriesActionsHelper").checkAllBucketsViewed(d);g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:e});if(e)return void 0;h.removeEndedLiveVideo();g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:d});if(!b("FBStoriesStore").hasDataInSelectedBucket()&&!b("FBStoriesStore").isSelectedBucketLive())return a?h.nextBucket():h.prevBucket();h.currentThreadIndexChanged(c);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY);return void 0},deleteThreadFromBucket:function(a,c){if(!b("FBStoriesStore").isUserManagedThread(a,c))return;b("FBStoriesGraphQLAPI").deleteStory(b("FBStoriesStore").getUserInfo().userID,a);g({type:b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET,threadID:a,bucketID:c});h.nextThread(b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},muteBucketOwner:function(a,c){b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted(b("CameraPostBucketOwnerHelper").getId(a),b("CameraPostBucketOwnerHelper").getName(a),b("CameraPostBucketOwnerHelper").getProfilePictureUri(a),!0);if(!c)return;g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:c});h._transitionBucket(!0,b("FBStoriesStore").getSelectedBucketIndex()-1)},reportThreadToAdmin:function(a){b("FBStoriesGraphQLAPI").reportThreadToAdmin(b("FBStoriesStore").getUserInfo().userID,a)},takeNegativeFeedbackAction:function(a,c){b("FBStoriesGraphQLAPI").takeNegativeFeedbackAction(b("FBStoriesStore").getUserInfo().userID,a,c)},removeEndedLiveVideo:function(){if(!b("FBStoriesStore").isSelectedBucketLiveAndEnded())return;var a=b("FBStoriesStore").getSelectedBucketId();b("FBStoriesStore").getThreadsForSelectedBucket().length>0?g({type:b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET,bucketID:a}):g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:a})},setIsCommercialBreakRunning:function(a,c){g({type:b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING,isCommercialBreakRunning:c,videoID:a})},unselectBucket:function(){g({type:b("FBStoriesActionTypes").UNSELECT_BUCKET})},optimisticCreateStoryPhoto:function(a){if(!a)return;g({type:b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY,imageURL:a})},setUserBucketUploadStatus:function(a){g({type:b("FBStoriesActionTypes").SET_USER_BUCKET_UPLOAD_STATUS,isUploading:a})},onPollOptionVoted:function(a,c){g({type:b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE,index:c}),b("FBStoriesGraphQLAPI").pollVote(a,c)},onReactToSticker:function(a,c){g({type:b("FBStoriesActionTypes").TAP_ON_REACTION_STICKER,stickerID:a,count:c}),b("FBStoriesGraphQLAPI").reactToSticker(a,c)},setIsProductionDialogLoading:function(a){g({type:b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING,value:a})},approvePendingThread:function(a,c){g({type:b("FBStoriesActionTypes").APPROVE_PENDING_THREAD,bucketID:a,threadID:c})}};e.exports=h}),null);
__d("FBStoriesReactionStickerConstants",[],(function(a,b,c,d,e,f){"use strict";a={WIDTH:150,HEIGHT:150};b=1e3;c=300;d="StoryOverlayReactionSticker";e.exports={DIMENSIONS:a,HOLD_DELAY:b,ANIMATIONS_INTERVAL_THROTTLE:c,StoryOverlayReactionSticker:d}}),null);
__d("FBStoriesStoryCardHelper",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getId:function(a){return((a=a)!=null?a.id:a)||""},getActor:function(a){a=(a=a)!=null?a.actors:a;return a?a[0]:null},getMedia:function(a){a=(a=a)!=null?a.attachments:a;return a?a[0].media:null},getActivityDescription:function(a){return(a=a)!=null?a.activity_description:a},getBackdropImage:function(a){a=(a=a)!=null?(a=a.backdrop)!=null?(a=a.media)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{image:{uri:a}}},getCameraPostSource:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?(a=a.logging)!=null?a.source:a:a:a)||"CAMERA_SYSTEM"},getCameraPostType:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.story_card_type:a:a)||"STORY"},getDefaultBackground:function(a){return((a=a)!=null?a.story_default_background:a)||null},getExplicitPlace:function(a){return((a=a)!=null?a.explicit_place:a)||null},getInlineActivities:function(a){return((a=a)!=null?a.inline_activities:a)||null},getInstagramProfileURL:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.instagram_profile_url:a:a)||null},getIsPlainText:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.is_plain_text:a:a)||!1},isSeenByViewer:function(a){return!!((a=a)!=null?(a=a.story_card_seen_state)!=null?a.is_seen_by_viewer:a:a)},getMediaBackground:function(a){a=(a=a)!=null?(a=a.story_card_info)!=null?(a=a.background_color_info)!=null?a.color_info:a:a:a;return a?a[0]:null},getMessageText:function(a){return((a=a)!=null?(a=a.message)!=null?a.text:a:a)||""},getMessageRanges:function(a){return((a=a)!=null?(a=a.message)!=null?a.messageRanges:a:a)||null},getTextFormatMetadata:function(a){return((a=a)!=null?a.text_format_metadata:a)||null},getTime:function(a){a=((a=a)!=null?(a=a.story_card_info)!=null?a.local_creation_time:a:a)||"";return Date.parse(a)/1e3},getOriginalPostStoryAttribution:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.shareable_attribution:a:a)||null},getWithTags:function(a){return((a=a)!=null?a.with_tags:a)||null},getNegativeFeedbackActions:function(a){var b=this;if(!a)return null;a=(a=a)!=null?(a=a.negative_feedback_actions)!=null?a.edges:a:a;return a?a.map(function(a){return a.node}).filter(function(a){return a&&b._shouldRenderNFXAction(a.negative_feedback_action_type)}):null},_shouldRenderNFXAction:function(a){switch(a){case"UNTAG":case"UNTAG_SPONSOR_PAGE":return!0;default:return!1}},isLandscape:function(a){var b;a=this.getMedia(a);return(a==null?void 0:(b=a.image)==null?void 0:b.height)<(a==null?void 0:(b=a.image)==null?void 0:b.width)},getStoryOverlays:function(a){return((a=a)!=null?a.story_overlays:a)||[]},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?a.seen_receipts_last_seen_time:a:a)||0},getNonFriendsSeenCount:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?(a=a.seen_receipent_seen_followers)!=null?a.count:a:a:a)||0},getfriendsSeenCount:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?(a=a.seen_receipent_seen_friends)!=null?a.count:a:a:a)||0},getThreadViewers:function(a,c){__p&&__p();var d=this,e={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!c||!a)return e;var f=(c=a)!=null?c.isCardViewed:c;c=((c=a)!=null?(c=c.story_card_info)!=null?(c=c.story_viewers)!=null?c.edges:c:c:c)||[];var g=b("CurrentUser").getID();e=c.reduce(function(b,c){__p&&__p();var e=d.getStoryViewerId(c);if(!e)return b;if(e!==g){e=((e=c)!=null?(e=e.node)!=null?e.is_viewer_friend:e:e)||!1;var h=e?"friends":"connections",i=d.getStoryViewerSeenTime(c),j=d.getStoryViewerReactions(c),k=i>=d.getSeenReceiptsLastSeenTime(a);b[h].push(babelHelpers["extends"]({},c.node,{seenTime:i,isNewViewer:k,reactions:j}));b.totalNew+=k?1:0;b.hasNewViewers=(b.hasNewViewers||k)&&!f;b.hasNewFriendViewers=b.hasNewFriendViewers||k&&e;b.hasNewConnectionsViewers=b.hasNewViewers||k&&!e}return b},e);var h=this.getNonFriendsSeenCount(a);return Object.assign(e,{totalCount:h+c.length,nonFriendsCount:h})},getStoryViewerReactions:function(a){var b;a=((a=a)!=null?(a=a.feedback)!=null?a.lightweight_reactions:a:a)||[];a=a&&a.length>0?((b=a[0])!=null?(b=b.messaging_actions)!=null?b.nodes:b:b)||[]:[];return a.map(function(a){return a.reaction})},getAllowedNavigationType:function(a,b){var c=a===0;a=a===b-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"},getCurrentCardData:function(a,b){var c=this.getActor(a),d=this.getTextFormatMetadata(a),e=null,f=null;d&&(e={body_style:d.font_style,preset_id:d.preset_id,text_input_style:d.text_input_style,swatch_style:{background_color:d.background_color,background_image:d.background_image}},f={portrait_background_image:d.portrait_background_image,portrait_keyframes_animation:d.portrait_keyframes_animation,inspirations_custom_font_object:d.inspirations_custom_font_object});d={id:c.id,name:c.name,short_name:c.short_name,gender:c.gender,is_viewer_friend:c.is_viewer_friend,profile_picture:c.profile_picture};return{activityDescription:this.getActivityDescription(a),backdropImage:this.getBackdropImage(a),bucketOwner:d,cameraPostSource:this.getCameraPostSource(a),cameraPostType:this.getCameraPostType(a),defaultBackground:this.getDefaultBackground(a),explicitLocation:this.getExplicitPlace(a),inlineActivities:this.getInlineActivities(a),instagramProfileURL:this.getInstagramProfileURL(a),isLive:!1,isPlainText:this.getIsPlainText(a),isSeen:this.isSeenByViewer(a),latestMessageID:null,linkAttachment:null,media:this.getMedia(a),mediaBackground:this.getMediaBackground(a),messageText:this.getMessageText(a),messageRanges:this.getMessageRanges(a),delightRanges:[],participants:[],textFormatMetadata:f,threadOwner:{name:c.name,id:c.id,is_viewer_friend:c.is_viewer_friend,profile_picture:c.profile_picture},time:this.getTime(a),threadID:b,originalPostStoryAttribution:this.getOriginalPostStoryAttribution(a),withTags:this.getWithTags(a),wwwTextFormatMetadata:e,negativeFeedbackActions:this.getNegativeFeedbackActions(a)}}};e.exports=a}),null);
__d("FBStoriesThreadHelper",["CameraPostMediaHelper","CameraPostThreadOwnerHelper","FBLogger","FBStoriesReactionStickerConstants","FBStoriesStoryCardHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||"STORY"},getCameraPostSource:function(a){return((a=a)!=null?a.post_source:a)||"CAMERA_SYSTEM"},isSeenByViewer:function(a){return!!((a=a)!=null?a.is_seen_by_viewer:a)},notSeenByViewer:function(a){return!g.isSeenByViewer(a)},setIsSeenByViewer:function(a,b){if(!a)return;a.is_seen_by_viewer=b},getLatestMessageID:function(a){return(a=a)!=null?(a=a.latest_message)!=null?a.id:a:a},getStatus:function(a){return(a=a)!=null?a.thread_status:a},isReviewStatusPending:function(a){a=g._getReviewStatus(a);return a==="PENDING"||a==="DENIED"},_getReviewStatus:function(a){return(a=a)!=null?a.thread_review_status:a},getTime:function(a){return((a=a)!=null?a.time:a)||0},getExpiryTime:function(a){return((a=a)!=null?a.thread_expiry_time:a)||0},isExpired:function(a){a=g.getExpiryTime(a);return!a?!1:a<Date.now()/1e3},isPending:function(a){return g.getStatus(a)==="PENDING"},isPublished:function(a){return g.getStatus(a)==="PUBLISHED"},getNonFriendsSeenCount:function(a){a=((a=a)!=null?a.non_friends_seen_count:a)||0;a<0&&b("FBLogger")("fbstories").mustfix("Non friend seen count should not be negative!");return a},setNonFriendsSeenCount:function(a,b){if(!a)return;a.non_friends_seen_count=b},getFriendsSeenCount:function(a){return((a=a)!=null?a.friends_seen_count:a)||0},setFriendsSeenCount:function(a,b){if(!a)return;a.friends_seen_count=b},getSeenCount:function(a){return g.getNonFriendsSeenCount(a)+g.getFriendsSeenCount(a)},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?a.seen_receipts_last_seen_time:a)||0},setSeenReceiptsLastSeenTime:function(a,b){if(!a)return;a.seen_receipts_last_seen_time=b},getSeenReceiptsUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_unseen_count:a)||0},doesThreadHasUnseenViewers:function(a){return!a?!1:g.getSeenReceiptsUnseenCount(a)>0||g.getSeenReceiptsFollowersUnseenCount(a)>0},getSeenReceiptsFollowersUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_followers_unseen_count:a)||0},setSeenReceiptsUnseenCount:function(a,b){if(!a)return;a.seen_receipts_unseen_count=b},setSeenReceiptsFollowersUnseenCount:function(a,b){if(!a)return;a.seen_receipts_followers_unseen_count=b},getOwner:function(a){return(a=a)!=null?a.camera_post_thread_owner:a},getOwnerId:function(a){return b("CameraPostThreadOwnerHelper").getId(g.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostThreadOwnerHelper").getIsViewerFriend(g.getOwner(a))},getViewers:function(a){return((a=a)!=null?(a=a.story_thread_viewers)!=null?a.edges:a:a)||[]},setViewers:function(a,b){if(!a)return;a.story_thread_viewers={edges:b}},getRootMessage:function(a){return(a=a)!=null?a.root_message:a},getStoryOverlays:function(a){return!a?[]:((a=g.getRootMessage(a))!=null?a.story_overlays:a)||[]},getReactionStickersReactors:function(a){__p&&__p();var c={};a=this.getStoryOverlays(a)||[];a.forEach(function(a){if(a.__typename===b("FBStoriesReactionStickerConstants").StoryOverlayReactionSticker){var d,e=(d=a)!=null?(d=d.reaction_sticker)!=null?d.id:d:d,f=(d=a)!=null?(d=d.reaction_sticker)!=null?(d=d.sticker_asset)!=null?d.image_asset_url:d:d:d;a=((d=a)!=null?(d=d.reaction_sticker)!=null?(d=d.sticker_reactions)!=null?d.nodes:d:d:d)||[];a.forEach(function(a){a=a.reactor.id;c[a]?c[a].push({stickerID:e,imgURL:f}):c[a]=[{stickerID:e,imgURL:f}]})}});return c},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getMedia:function(a){return(a=g.getRootMessage(a))!=null?a.message_media:a},getMediaId:function(a){return b("CameraPostMediaHelper").getId(g.getMedia(a))},getMediaType:function(a){return b("CameraPostMediaHelper").getType(g.getMedia(a))},getMediaPreviewImage:function(a){return b("CameraPostMediaHelper").getPreviewImage(g.getMedia(a))},getWWWTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.www_text_format_metadata:a)||null},getIsPlainText:function(a){return((a=g.getRootMessage(a))!=null?a.is_plain_text:a)||!1},getTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.text_format_metadata:a)||null},getBackdropImage:function(a){return((a=g.getRootMessage(a))!=null?a.backdrop_image:a)||null},getMessageText:function(a){return((a=g.getRootMessage(a))!=null?a.message_text:a)||""},getMessageRanges:function(a){return((a=g.getRootMessage(a))!=null?a.message_ranges:a)||null},getDelightRanges:function(a){return((a=g.getRootMessage(a))!=null?a.delight_ranges:a)||[]},getActivityDescription:function(a){return!a?null:a.activity_description||null},getMediaBackground:function(a){if(!a)return null;a=(a=a.background_color_info)!=null?a.color_info:a;return a&&a.length>0?a[0]:null},getLinkAttachment:function(a){return!a?null:a.share_story_attachment||null},getWithTags:function(a){return!a?null:a.with_tags||null},getDefaultBackground:function(a){return!a?null:a.story_default_background||null},getExplicitLocation:function(a){return!a?null:a.explicit_place||null},getInlineActivities:function(a){return!a?null:a.inline_activities||null},getInstagramProfileURL:function(a){return((a=a)!=null?a.instagram_profile_url:a)||null},getOriginalPostStoryAttribution:function(a){return!a?null:((a=g.getRootMessage(a))!=null?a.original_post_story_attribution:a)||null},getNegativeFeedbackActions:function(a){return b("FBStoriesStoryCardHelper").getNegativeFeedbackActions(a)},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},getStoryViewerReactions:function(a){var b;a=((a=a)!=null?(a=a.feedback)!=null?a.lightweight_reactions:a:a)||[];a=a&&a.length>0?((b=a[0])!=null?(b=b.messaging_actions)!=null?b.nodes:b:b)||[]:[];return a.map(function(a){return a.reaction})},makeOptimisticPhotoThread:function(a){var c=this._getDefaultThread();a=b("CameraPostMediaHelper").makeOptimisticPhotoMedia(a);return babelHelpers["extends"]({},c,{is_seen_by_viewer:!1,root_message:{message_media:a},thread_expiry_time:Math.floor(Date.now()/1e3+24*60*60),thread_status:"UPLOADING",time:Math.floor(Date.now()/1e3)})},_getDefaultThread:function(){return{id:null,camera_post_type:null,post_source:null,time:null,thread_expiry_time:null,seen_receipts_last_seen_time:null,seen_receipts_unseen_count:null,seen_receipts_followers_unseen_count:null,thread_status:null,thread_review_status:null,root_message:{message_media:null,delight_ranges:[]},latest_message:{id:null},is_seen_by_viewer:null,is_user_story_thread_viewer:null,camera_post_thread_owner:null,friends_seen_count:null,non_friends_seen_count:null,story_thread_viewers:{edges:null},activity_description:null}}};e.exports=g}),null);
__d("FBStoriesBucketHelper",["CameraPostBucketOwnerHelper","CameraPostTypesHelper","CurrentUser","FBStoriesLoggingConstants","FBStoriesThreadHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUnseenThread:function(a){var b=h.getThreads(a);return b[Math.max(0,h.getUnseenThreadIndex(a))]}},h={isUserBucket:function(a){return h.getOwnerId(a)===b("CurrentUser").getID()},getLiveVideo:function(a){return(a=a)!=null?a.live_video:a},getMediaIDForLiveBucket:function(a){return(a=a)!=null?(a=a.live_video)!=null?a.id:a:a},isLive:function(a){return!!((a=h.getLiveVideo(a))!=null?a.id:a)},setLiveVideo:function(a,b){if(!a)return;a.live_video=b},hasData:function(a){return!a?!1:this.isLive(a)||h.getThreads(a).length>0},getThreads:function(a){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];return a.filter(function(a){return b("FBStoriesThreadHelper").isPublished(a)&&!b("FBStoriesThreadHelper").isExpired(a)})},getPendingThreads:function(a){return((a=a)!=null?(a=a.pending_threads)!=null?a.nodes:a:a)||[]},getThreadIDs:function(a){a=h.getThreads(a);return a.map(function(a){return((a=a)!=null?a.id:a)||""})},setThreads:function(a,b){if(!a)return;a.threads={nodes:b}},setPendingThreads:function(a,b){if(!a)return;a.pending_threads={nodes:b}},hasPendingThreads:function(a){if(!a.pending_stories)return!1;a=(a=a)!=null?(a=a.pending_stories)!=null?a.count:a:a;return!a?!1:a>0},getUnseenThreadIndex:function(a){var c=h.getThreads(a);a=h.isUserBucket(a);return a?c.findIndex(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers):c.findIndex(b("FBStoriesThreadHelper").notSeenByViewer)},hasNewViewers:function(a){if(!a)return!1;a=this.getThreads(a);a=a.filter(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers);return a.length>0},hasUnseenThreads:function(a){return this.getThreads(a).findIndex(b("FBStoriesThreadHelper").notSeenByViewer)>=0},getPreviewImage:function(a){a=g.getUnseenThread(a);return b("FBStoriesThreadHelper").getMediaPreviewImage(a)},getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||"STORY"},getUnseenCount:function(a){return((a=a)!=null?a.unseen_count:a)||0},setUnseenCount:function(a,b){if(!a)return;a.unseen_count=b},hasLiveVideoEnded:function(a){return!!((a=a)!=null?a.has_live_video_ended:a)},setHasLiveVideoEnded:function(a,b){if(!a)return;a.has_live_video_ended=b},getOwner:function(a){return((a=a)!=null?a.camera_post_bucket_owner:a)||{id:null,name:null,short_name:null,gender:null,is_viewer_friend:!1,profile_picture:null}},getOwnerId:function(a){return b("CameraPostBucketOwnerHelper").getId(h.getOwner(a))},getOwnerGender:function(a){return b("CameraPostBucketOwnerHelper").getGender(h.getOwner(a))},isOwnerEmployee:function(a){return b("CameraPostBucketOwnerHelper").isEmployee(h.getOwner(a))},isViewerEventHost:function(a){return b("CameraPostBucketOwnerHelper").isEventHost(h.getOwner(a))},isViewerPageContentAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerPageContentAdmin(h.getOwner(a))},isViewerGroupAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupAdmin(h.getOwner(a))},isViewerGroupModerator:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupModerator(h.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostBucketOwnerHelper").isViewerFriend(h.getOwner(a))},getOwnerProfilePictureUri:function(a){return b("CameraPostBucketOwnerHelper").getProfilePictureUri(h.getOwner(a))},getOwnerCoverPhotoUri:function(a){return b("CameraPostBucketOwnerHelper").getCoverPhotoUri(h.getOwner(a))},getOwnerName:function(a,c){c===void 0&&(c=!1);var d=h.getCameraPostType(a);a=h.getOwner(a);if(!c&&b("CameraPostTypesHelper").isStory(d)&&a.short_name)return a.short_name;else return a.name},getLatestThreadCreationTime:function(a){return!a?null:(a=a)!=null?a.latest_thread_creation_time:a},getLoggingType:function(a){__p&&__p();if(!a)return b("FBStoriesLoggingConstants").MISSING_STORY_DATA;if(h.isUserBucket(a))return b("FBStoriesLoggingConstants").SELF_STORY;var c=h.getCameraPostType(a);if(b("CameraPostTypesHelper").isPageStory(c))return b("FBStoriesLoggingConstants").PAGE_STORY;if(b("CameraPostTypesHelper").isGroupStory(c))return b("FBStoriesLoggingConstants").GROUP_STORY;if(b("CameraPostTypesHelper").isEventStory(c))return b("FBStoriesLoggingConstants").EVENT_STORY;if(b("CameraPostTypesHelper").isPromotionStory(c))return b("FBStoriesLoggingConstants").STORY_PROMOTION;return!h.isViewerFriendOfOwner(a)?b("FBStoriesLoggingConstants").FOLLOWEE_STORY:b("FBStoriesLoggingConstants").FRIEND_STORY},addThreadToBucket:function(a,b){var c=h.getThreads(a);h.setThreads(a,c.concat(b))},getDefaultBucket:function(){return{id:null,camera_post_type:null,unseen_count:0,ranking:null,live_video:null,camera_post_bucket_owner:null,threads:null,pending_threads:null,latest_thread_creation_time:null}},isUploading:function(a){if(!a)return!1;a=(a=a)!=null?a.is_uploading:a;return!!a},setUploading:function(a,b){if(!a)return;a.is_uploading=b}};e.exports=h}),null);
__d("FBStoriesLiveVideoActionTypes",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({SET_UI_COMPONENTS:null,REMOVE_UI_COMPONENTS:null,LIVE_BUCKET_LOADED:null,LOAD_UI_COMPONENTS_FAILED:null});e.exports=a}),null);
__d("FBStoriesMutedBucketOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getProfilePictureUri:function(a){return((a=a)!=null?a.profilePictureUri:a)||""},getMuted:function(a){return!!((a=a)!=null?a.muted:a)},setMuted:function(a,b){a.muted=b}};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({LOADING:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADING",LOADED:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED",LOADED_ERROR:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED_ERROR",SET_IS_CURRENTLY_MUTING:"FB_STORIES_MUTED_BUCKET_OWNERS.SET_IS_CURRENTLY_MUTING",UPDATE_MUTED_OPTIMISTIC:"FB_STORIES_MUTED_BUCKET_OWNERS.UPDATE_MUTED_OPTIMISTIC"});e.exports=a}),null);
__d("fbStoriesMutedBucketOwnersSelectors",[],(function(a,b,c,d,e,f){"use strict";var g={isLoading:function(a){return a.data.isLoading()},getMutedBucketOwners:function(a){a=a.data;return a.hasValue()?a.getValueEnforcing():[]},getCurrentlyMutingBucketOwners:function(a){return a.currentlyMutingBucketOwners},isCurrentlyMutingBucketOwners:function(a){return g.getCurrentlyMutingBucketOwners(a).length!==0},canReload:function(a){return!this.isCurrentlyMutingBucketOwners(a)&&!this.isLoading(a)}};e.exports=g}),null);
__d("fbStoriesMutedBucketOwnersReducer",["FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActionTypes","LoadObject","fbStoriesMutedBucketOwnersSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesMutedBucketOwnersActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED:return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(c.data),currentlyMutingBucketOwners:[]});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.errorSummary))});case b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING:var d=a.currentlyMutingBucketOwners,e=a.currentlyMutingBucketOwners.indexOf(c.ownerID);c.value&&e===-1?(d=d.slice(),d.push(c.ownerID)):!c.value&&e!==-1&&(d=d.slice(),d.splice(e,1));return babelHelpers["extends"]({},a,{currentlyMutingBucketOwners:d});case b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC:e=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a);var f=c.value;d=!1;var g=e.map(function(a){if(b("FBStoriesMutedBucketOwnerHelper").getId(a)===c.ownerID){var e=babelHelpers["extends"]({},a);d=!0;b("FBStoriesMutedBucketOwnerHelper").setMuted(e,f);return e}else return a});d||(g=e.concat({id:c.ownerID,name:c.ownerName,profilePictureUri:c.ownerProfilePictureUri,muted:f}));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(g)});default:return a}}e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersStore",["FBStoriesDispatcher","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{data:b("LoadObject").empty(),currentlyMutingBucketOwners:[]}};d.reduce=function(a,c){return b("fbStoriesMutedBucketOwnersReducer")(a,c)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("fbStoriesRootSelectors",["FBStoriesBucketHelper","reselect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("reselect").createSelector;var g=function(a,b,c){return c===0?a:(a=b)!=null?a[c-1]:a};c=function(a){return a.data};d=a([c],function(a){return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}});f=a(c,function(a){return a.isLoading()});c=a([d],function(a){return a.userBucketData||{}});var h=a([c],function(a){return a&&a.id}),i=a([d],function(a){return a.friendsBucketData||[]}),j=a([i],function(a){return a.map(function(a){return a.id?a.id:""})});h=a([j,h],function(b,a){return[a].concat(b)});d=a([d],function(a){return a.userInfo||{}});var k=function(a){return a.selectedBucketIndex};k=a([k,c,i],function(b,c,a){return g(c,a,b)});var l=a([k],function(a){return a&&a.id}),m=a(c,function(a){return b("FBStoriesBucketHelper").isUploading(a)});a=a([i,c],function(a,c){c=[c].concat(a);return c.reduce(function(a,c){if(!c||!c.id)return a;if(!b("FBStoriesBucketHelper").hasData(c))return a;c={bucketID:b("FBStoriesBucketHelper").getId(c),cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(c),owner:b("FBStoriesBucketHelper").getOwner(c),previewImageUri:b("FBStoriesBucketHelper").getPreviewImage(c),profileImageUri:b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c),hasUnseenThreads:b("FBStoriesBucketHelper").hasUnseenThreads(c),hasNewViewers:b("FBStoriesBucketHelper").hasNewViewers(c),ownedByViewer:b("FBStoriesBucketHelper").isUserBucket(c),isLive:b("FBStoriesBucketHelper").isLive(c),latestThreadCreationTime:b("FBStoriesBucketHelper").getLatestThreadCreationTime(c),actorName:b("FBStoriesBucketHelper").getOwnerName(c,!0),actorShortName:b("FBStoriesBucketHelper").getOwnerName(c),actorGender:b("FBStoriesBucketHelper").getOwnerGender(c)};return a.concat([c])},[])});e.exports={bucketDescriptors:a,loading:f,userBucketData:c,friendsBucketData:i,friendsBucketIds:j,userInfo:d,bucketIds:h,selectedBucket:k,selectedBucketId:l,uploading:m}}),null);
__d("fbStoriesStateSelectors",["FBStoriesBucketHelper","fbStoriesRootSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a=b("fbStoriesRootSelectors")).bucketIds,h=a.friendsBucketData,i=a.selectedBucketId,j=a.userBucketData,k={bucketByBucketId:function(a,b){b=k.bucketIndexByBucketId(a,b);return k.bucketByIndex(a,b)},bucketByIndex:function(a,b){return b===0?j(a):(a=h(a))!=null?a[b-1]:a},bucketIndexByBucketId:function(a,b){a=g(a);return a.indexOf(b)},isOwnBucket:function(a,c){return(c!=void 0?c:i(a))===b("FBStoriesBucketHelper").getId(j(a))},isProductionDialogLoading:function(a){return a.isProductionDialogLoading}};e.exports=k}),null);
__d("friendsBucketSorter",["CameraPostTypesHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return function(b,c){var d=b.live_video&&b.live_video.id,e=c.live_video&&c.live_video.id;if(d!==e)return d?-1:1;if(g(b,c))return i(b)?-1:1;if(h(b,c))return j(b)?-1:1;return k(b,c,a)?l(b,a)?-1:1:n(b)>=n(c)?-1:1}}function g(a,b){return m(a,b,i)}function h(a,b){return m(a,b,j)}function i(a){return a.unseen_count>0}function j(a){return b("CameraPostTypesHelper").isEventStory(a.camera_post_type)}function k(a,b,c){return l(a,c)!==l(b,c)}function l(a,b){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];for(var c=0;c<a.length;c++){var d;d=(d=a[c])!=null?(d=d.camera_post_thread_owner)!=null?d.id:d:d;if(d===b)return!0}return!1}function m(a,b,c){a=c(a);c=c(b);return a!=c}function n(a){return((a=a)!=null?(a=a.ranking)!=null?a.score:a:a)||0}e.exports=a}),null);
__d("FBStoriesStore",["CameraPostMediaHelper","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGating","FBStoriesLiveVideoActionTypes","FBStoriesMutedBucketOwnersStore","FBStoriesReactionStickerConstants","FBStoriesThreadHelper","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersSelectors","fbStoriesRootSelectors","fbStoriesStateSelectors","friendsBucketSorter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{data:b("LoadObject").empty(),selectedBucketIndex:-1,currentThreadIndex:-1,currentThreadPercentDone:0,unseenMode:!1,allBucketsViewed:!1,lastViewedThreadIndexForBucket:new Map(),isProductionDialogLoading:!1,isCommercialBreakRunning:new Map(),isViewerOpen:!1,subscriptionToken:null,viewerEntrypoint:null}};d.reduce=function(a,c){__p&&__p();var d=this;switch(c.type){case b("FBStoriesActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesActionTypes").LOADED:var e=c.data,f=e.userInfo;e=e.userBucketData;var g=c.data.friendsBucketData;g=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(g,this.$FBStoriesStore1(),this.isOwnBucket(this.getSelectedBucketId()));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userInfo:f,userBucketData:e,friendsBucketData:g})});case b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD:var h=c.data.node;f=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d,e=babelHelpers["extends"]({},a);(d=b("FBStoriesThreadHelper")).setFriendsSeenCount(e,d.getFriendsSeenCount(h));d.setNonFriendsSeenCount(e,d.getNonFriendsSeenCount(h));d.setViewers(e,d.getViewers(h));return e}return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE:var i=c.bucketData;e=b("FBStoriesBucketHelper").getOwnerId(i);if(this.isMutedBucketOwner(e))return a;g=b("FBStoriesBucketHelper").getThreads(i);var j=g.length>0||this.$FBStoriesStore3(i),k=b("FBStoriesBucketHelper").getId(i);f=b("fbStoriesRootSelectors").friendsBucketData(a);e=!1;g=f.reduce(function(a,c){b("FBStoriesBucketHelper").getId(c)===k?(e=!0,j&&a.push(i)):a.push(c);return a},[]);!e&&j&&(g=[i].concat(f));g=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(g,b("fbStoriesRootSelectors").selectedBucket(a),b("fbStoriesStateSelectors").isOwnBucket(a,b("fbStoriesRootSelectors").selectedBucketId(a)));f=b("FBStoriesGating").shouldUseTrayMigration();f||g.sort(b("friendsBucketSorter")(b("fbStoriesRootSelectors").userInfo(a).userID));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:b("fbStoriesRootSelectors").userBucketData(a),userInfo:b("fbStoriesRootSelectors").userInfo(a),friendsBucketData:g})});case b("FBStoriesActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.message))});case b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY:return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:new Map()});case b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED:f=c.bucketIndex;return f<0||f>=this.getBucketCount()?a:babelHelpers["extends"]({},a,{selectedBucketIndex:f});case b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED:g=this.getThreadCountForSelectedBucket();if(!this.isSelectedBucketLive()&&(c.index<0||c.index>=g))return a;f=new Map(a.lastViewedThreadIndexForBucket);f.set(this.getSelectedBucketIndex(),c.index);return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:f,currentThreadIndex:c.index});case b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE:g=Math.min(100,Math.max(c.percentDone,0));return babelHelpers["extends"]({},a,{currentThreadPercentDone:g});case b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED:f=c.value;return f===a.allBucketsViewed?a:babelHelpers["extends"]({},a,{allBucketsViewed:f,unseenMode:a.unseenMode&&f?!1:a.unseenMode});case b("FBStoriesActionTypes").SET_UNSEEN_MODE:return babelHelpers["extends"]({},a,{unseenMode:c.value});case b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC:var l=this.getSelectedBucketId()?this.getSelectedBucketId():c.bucketID;g=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===l){var e=b("FBStoriesBucketHelper").getUnseenCount(a),f=d.$FBStoriesStore4(a).map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){b("FBStoriesThreadHelper").isSeenByViewer(a)||(e=Math.max(e-1,0));var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setIsSeenByViewer(d,!0);return d}else return a}),g=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setUnseenCount(g,e);b("FBStoriesBucketHelper").setThreads(g,f);return g}else return a};f=this.isOwnBucket()?g(this.getUserBucketData()):this.getUserBucketData();g=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(g);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:g,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:f=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setSeenReceiptsLastSeenTime(d,Date.now());b("FBStoriesThreadHelper").setSeenReceiptsUnseenCount(d,0);b("FBStoriesThreadHelper").setSeenReceiptsFollowersUnseenCount(d,0);return d}else return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET:var m=c.threadID,n=c.bucketID;if(!this.isUserManagedThread(m,n))return a;g=this.getUserBucketData();f=null;n===b("FBStoriesBucketHelper").getId(g)?(b("FBStoriesBucketHelper").setThreads(g,this.$FBStoriesStore4(g).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==m})),f=this.getFriendsBucketData()):f=this.getFriendsBucketData().map(function(a){if(b("FBStoriesBucketHelper").getId(a)===n){var c=d.$FBStoriesStore4(a).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==m}),e=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(e,c);return e}else return a}).filter(function(a){return d.$FBStoriesStore4(a).length>0});var o=a.lastViewedThreadIndexForBucket;m===this.getCurrentThreadIDForSelectedBucket()&&(o=new Map(o),o.set(this.getSelectedBucketIndex(),void 0));return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:o,data:b("LoadObject").withValue({userBucketData:g,friendsBucketData:f,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").REMOVE_BUCKET:var p=c.bucketID;o=this.getFriendsBucketData().filter(function(a){return b("FBStoriesBucketHelper").getId(a)!==p});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:o,userInfo:this.getUserInfo()})});case b("FBStoriesLiveVideoActionTypes").LIVE_BUCKET_LOADED:g=c.data;f=b("FBStoriesDataHelper").getFriendsBucketDataFromLoadedObject(g);o=[].concat(this.getFriendsBucketData());g=f.reduce(function(a,c){d.$FBStoriesStore3(c)&&d.getBucketIndexByBucketId(b("FBStoriesBucketHelper").getId(c))===-1&&a.push(c);return a},o);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:g})});case b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:var q=c.bucketID;f=this.getFriendsBucketData().map(function(a){b("FBStoriesBucketHelper").getId(a)===q&&(b("FBStoriesBucketHelper").setLiveVideo(a,null),b("FBStoriesBucketHelper").setHasLiveVideoEnded(a,!1));return a});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:f,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING:o=new Map(this.getState().isCommercialBreakRunning);return babelHelpers["extends"]({},a,{isCommercialBreakRunning:o.set(c.videoID,c.isCommercialBreakRunning)});case b("FBStoriesActionTypes").UNSELECT_BUCKET:return babelHelpers["extends"]({},a,{selectedBucketIndex:-1,currentThreadIndex:-1});case b("FBStoriesActionTypes").SET_VIEWER_OPEN:return babelHelpers["extends"]({},a,{isViewerOpen:c.value,viewerEntrypoint:c.entrypoint});case b("FBStoriesActionTypes").SET_USER_BUCKET_UPLOAD_STATUS:g=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").setUploading(g,c.isUploading);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:g,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY:f=b("FBStoriesThreadHelper").makeOptimisticPhotoThread(c.imageURL);o=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").addThreadToBucket(o,f);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:o,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").RESET_STATE:return babelHelpers["extends"]({},this.getInitialState());case b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN:return babelHelpers["extends"]({},a,{subscriptionToken:c.token});case b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE:var r=c.index,s=this.getSelectedBucketId();g=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===s){var c=d.$FBStoriesStore4(a).map(function(a){__p&&__p();if(b("FBStoriesThreadHelper").getId(a)===d.getCurrentThreadIDForSelectedBucket()){var c,e=babelHelpers["extends"]({},a);(((c=e)!=null?(c=c.root_message)!=null?c.story_overlays:c:c)||[]).map(function(a){if(a.__typename==="StoryOverlayPollSticker"){var b=a.poll,c=babelHelpers["extends"]({},b);c.viewer_vote_index=r;c.poll_options=[].concat(b.poll_options);b=c.poll_options[r];b!==void 0&&(b.vote_count+=1);a.poll=c}return a});return e}else return a}),e=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(e,c);return e}else return a};f=this.isOwnBucket()?g(this.getUserBucketData()):this.getUserBucketData();o=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(g);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:o,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").TAP_ON_REACTION_STICKER:var t=c.stickerID,u=c.count,v=this.getUserInfo().userID,w=!1,x=this.getSelectedBucketId();g=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===x){var c=d.$FBStoriesStore4(a).map(function(a){__p&&__p();if(b("FBStoriesThreadHelper").getId(a)===d.getCurrentThreadIDForSelectedBucket()){var c,e=babelHelpers["extends"]({},a);(((c=e)!=null?(c=c.root_message)!=null?c.story_overlays:c:c)||[]).map(function(a){__p&&__p();if(a.__typename===b("FBStoriesReactionStickerConstants").StoryOverlayReactionSticker&&a.reaction_sticker.id===t){var c=a.reaction_sticker.sticker_reactions.nodes;for(var d=c,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(v===g.reactor.id){g.reaction_count+=u;w=!0;break}}w||c.push({reaction_count:u,reactor:{id:v}})}return a});return e}else return a}),e=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(e,c);return e}else return a};f=this.isOwnBucket()?g(this.getUserBucketData()):this.getUserBucketData();o=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(g);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:o,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING:return babelHelpers["extends"]({},a,{isProductionDialogLoading:c.value});case b("FBStoriesActionTypes").APPROVE_PENDING_THREAD:var y=c.bucketID,z=c.threadID;g=this.getFriendsBucketData().map(function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===y){var c=b("FBStoriesBucketHelper").getPendingThreads(a),e=c.findIndex(function(a){return b("FBStoriesThreadHelper").getId(a)===z});if(e===-1)return a;var f=c[e];c.splice(e,1);b("FBStoriesBucketHelper").setPendingThreads(a,c);e=b("FBStoriesThreadHelper").getTime(f);c=d.$FBStoriesStore4(a);var g=0;if(c.length===0)c.push(f);else for(g=c.length-1;g>=0;g--){var h=b("FBStoriesThreadHelper").getTime(c[g]);if(e>h){c.splice(g+1,0,f);break}else g===0&&c.splice(0,0,f)}b("FBStoriesBucketHelper").setThreads(a,c);h=babelHelpers["extends"]({},a);return h}return a});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:g,userInfo:this.getUserInfo()})});default:return a}};d.$FBStoriesStore5=function(){var a=this.getState().data;return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}};d.getUserBucketData=function(){return this.$FBStoriesStore5().userBucketData||{}};d.getUserInfo=function(){return this.$FBStoriesStore5().userInfo||{}};d.getFriendsBucketData=function(){return this.$FBStoriesStore5().friendsBucketData||[]};d.isMutedBucketOwner=function(a){var c=b("FBStoriesMutedBucketOwnersStore").getState();c=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(c);return c.find(function(b){return b.id===a})!==void 0};d.isLoading=function(){return this.getState().data.isLoading()};d.getBucketIds=function(){var a=this.getFriendsBucketData().map(function(a){return a.id?a.id:""}),b=this.getUserBucketData().id||"";return[b].concat(a)};d.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex};d.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()]};d.areAllBucketsViewed=function(){return this.getState().allBucketsViewed};d.getCameraPostTypeForBucketId=function(a){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore6(a))};d.doesBucketContainThreadId=function(a,c){a=this.$FBStoriesStore6(a);a=b("FBStoriesBucketHelper").getThreads(a);return a.find(function(a){return b("FBStoriesThreadHelper").getId(a)===c})!==void 0};d.$FBStoriesStore6=function(a){return this.getBucketByIndex(this.getBucketIndexByBucketId(a))};d.getBucketIndexByBucketId=function(a){return this.getBucketIds().indexOf(a)};d.getSelectedBucketCameraPostType=function(){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore1())};d.getSelectedBucketOwner=function(){return b("FBStoriesBucketHelper").getOwner(this.$FBStoriesStore1())};d.getSelectedBucketOwnerID=function(){return b("FBStoriesBucketHelper").getOwnerId(this.$FBStoriesStore1())};d.getSelectedBucketUnseenCount=function(){return b("FBStoriesBucketHelper").getUnseenCount(this.$FBStoriesStore1())};d.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore4(this.$FBStoriesStore1())};d.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex};d.getCurrentThreadIDForSelectedBucket=function(){return b("FBStoriesThreadHelper").getId(this.getCurrentThreadForSelectedBucket())};d.getCurrentThreadStatusForSelectedBucket=function(){return b("FBStoriesThreadHelper").getStatus(this.getCurrentThreadForSelectedBucket())};d.getCurrentThreadCameraPostTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?"STORY":b("FBStoriesThreadHelper").getCameraPostType(this.getCurrentThreadForSelectedBucket())};d.getCurrentThreadMediaTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?"live":b("FBStoriesThreadHelper").getMediaType(this.getCurrentThreadForSelectedBucket())};d.getFeedTrackingData=function(a){__p&&__p();var b={};b.is_fb_story=!0;b.media_id=this.getCurrentThreadMediaIDForSelectedBucket();b.camera_post_type=this.getSelectedBucketCameraPostType();b.story_owner_fbid=this.getSelectedBucketOwnerID();b.story_owner_type=this.getSelectedBucketOwnerType();b.story_size=this.getThreadCountForSelectedBucket();b.new_content_size=this.getSelectedBucketUnseenCount();b.bucket_index=this.getSelectedBucketIndex();b.event=a;b.bucket_ids=this.getBucketIds();a=this.getUserBucketData();a&&(b.bucket_data=a);a=this.getCurrentThreadData();a&&(b.thread_data=a);return b};d.getCurrentThreadMediaIDForSelectedBucket=function(){if(this.isSelectedBucketLive()){var a=this.getThreadDataForSelectedLiveBucket();return a&&a.media.id}return b("FBStoriesThreadHelper").getMediaId(this.getCurrentThreadForSelectedBucket())};d.getCurrentThreadMediaViewerCountForSelectedBucket=function(){var a=this.getCurrentThreadForSelectedBucket();return b("FBStoriesThreadHelper").getSeenCount(a)};d.getCurrentThreadForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()]};d.getCurrentThreadData=function(){return this.isSelectedBucketLive()?this.getThreadDataForSelectedLiveBucket():this.$FBStoriesStore7(this.getState().currentThreadIndex)};d.shouldDisableReply=function(){var a=this.isOwnThread(),c=b("FBStoriesBucketHelper").isViewerFriendOfOwner(this.$FBStoriesStore1()),d=b("FBStoriesThreadHelper").isViewerFriendOfOwner(this.getCurrentThreadForSelectedBucket());return a||!c&&!d||this.isSelectedBucketLive()};d.getNonFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getNonFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};d.getFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};d.isOwnBucket=function(a){return(a!=void 0?a:this.getSelectedBucketId())===b("FBStoriesBucketHelper").getId(this.getUserBucketData())};d.isOwnThread=function(){if(this.isOwnBucket())return!0;var a=this.getCurrentThreadForSelectedBucket();a=b("FBStoriesThreadHelper").getOwnerId(a);return a===this.getUserInfo().userID};d.isBucketViewerEventHost=function(){var a=this.$FBStoriesStore1();return b("FBStoriesBucketHelper").isViewerEventHost(a)};d.isCurrentThreadUserManaged=function(){return this.isUserManagedThread(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};d.canUserReportCurrentThreadToFacebook=function(){return this.canUserReportThreadToFacebook(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};d.isCurrentBucketUserManaged=function(){return this.isUserManagedBucket(this.getSelectedBucketId())};d.isUserManagedThread=function(a,c){var d=this.$FBStoriesStore6(c);if(!d)return!1;a=this.$FBStoriesStore8(a,d);d=b("FBStoriesThreadHelper").getOwnerId(a);return a&&d===this.getUserInfo().userID||this.isUserManagedBucket(c)};d.canUserReportThreadToFacebook=function(a,c){c=this.$FBStoriesStore6(c);if(!c)return!1;a=this.$FBStoriesStore8(a,c);return a===null?!1:b("FBStoriesThreadHelper").getOwnerId(a)!==this.getUserInfo().userID&&!b("FBStoriesBucketHelper").isViewerEventHost(c)&&!b("FBStoriesBucketHelper").isViewerPageContentAdmin(c)};d.isUserManagedBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").getId(a)===b("FBStoriesBucketHelper").getId(this.getUserBucketData())||b("FBStoriesBucketHelper").isViewerEventHost(a)||b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)||b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};d.canSeeCurrentThreadViewCount=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()||this.isCurrentBucketPageAdmin()};d.canOpenCurrentThreadViewerSheet=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()};d.isCurrentBucketGroupAdmin=function(){return this.isGroupAdminBucket(this.getSelectedBucketId())};d.isCurrentBucketPageAdmin=function(){return this.isPageAdminBucket(this.getSelectedBucketId())};d.isGroupAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};d.isPageAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)};d.isCurrentThreadReviewStatusPending=function(){var a=this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()];return b("FBStoriesThreadHelper").isReviewStatusPending(a)};d.hasPendingThreads=function(){var a=this.$FBStoriesStore6(this.getSelectedBucketId());return!a?!1:b("FBStoriesBucketHelper").hasPendingThreads(a)};d.getBucketCount=function(){return this.getFriendsBucketData().length+1};d.hasDataInSelectedBucket=function(){return b("FBStoriesBucketHelper").hasData(this.$FBStoriesStore1())};d.hasOwnBucketViewers=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasNewViewers(this.getUserBucketData())};d.hasOwnBucketUpdates=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasUnseenThreads(this.getUserBucketData())};d.hasOwnBucketContent=function(){return this.$FBStoriesStore2().length>0||this.userBucketIsLive()};d.getCurrentThreadPercentDone=function(){return this.getState().currentThreadPercentDone};d.getThreadCountForSelectedBucket=function(){return this.getThreadsForSelectedBucket().length};d.userBucketIsLive=function(){return this.$FBStoriesStore3(this.getUserBucketData())};d.isSelectedBucketLive=function(){return this.$FBStoriesStore3(this.$FBStoriesStore1())};d.getSelectedBucketOwnerType=function(){return b("FBStoriesBucketHelper").getLoggingType(this.$FBStoriesStore1())};d.$FBStoriesStore3=function(a){return b("FBStoriesBucketHelper").isLive(a)};d.getCurrentThreadViewers=function(){__p&&__p();var a={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!this.canSeeCurrentThreadViewCount())return a;var c=this.getCurrentThreadForSelectedBucket(),d=b("FBStoriesThreadHelper").getViewers(c),e=this.getUserInfo().userID,f=b("FBStoriesThreadHelper").getReactionStickersReactors(c);a=d.reduce(function(a,d){__p&&__p();var g=b("FBStoriesThreadHelper").getStoryViewerId(d);if(!g)return a;if(g!==e){var h;h=((h=d)!=null?(h=h.node)!=null?h.is_viewer_friend:h:h)||!1;var i=h?"friends":"connections",j=b("FBStoriesThreadHelper").getStoryViewerSeenTime(d),k=b("FBStoriesThreadHelper").getStoryViewerReactions(d),l=j>=b("FBStoriesThreadHelper").getSeenReceiptsLastSeenTime(c);a[i].push(babelHelpers["extends"]({},d.node,{seenTime:j,isNewViewer:l,reactions:k,reactionStickers:f[g]}));a.totalNew+=l?1:0;a.hasNewViewers=a.hasNewViewers||l;a.hasNewFriendViewers=a.hasNewFriendViewers||l&&h;a.hasNewConnectionsViewers=a.hasNewViewers||l&&!h}return a},a);var g=this.getNonFriendsSeenCount();return Object.assign(a,{totalCount:g+d.length,nonFriendsCount:g})};d.isUnseenMode=function(){return this.getState().unseenMode};d.getThreadCount=function(a){__p&&__p();var b=this.getBucketByIndex(a);if(this.$FBStoriesStore3(b))return 0;if(a===0){var c=this.$FBStoriesStore4(this.getUserBucketData());return c.length}if(a>0){c=this.$FBStoriesStore4(b);return c.length}return-1};d.getUnseenThreadIndex=function(a){return b("FBStoriesBucketHelper").getUnseenThreadIndex(this.getBucketByIndex(a))};d.getAllowedNavigationType=function(){var a=this.getSelectedBucketIndex(),c=a===0||a==1&&!b("FBStoriesBucketHelper").hasData(this.getUserBucketData());a=a===this.getBucketCount()-1;c=c&&this.getCurrentThreadIndexForSelectedBucket()==0;a=a&&this.getCurrentThreadIndexForSelectedBucket()===this.getThreadsForSelectedBucket().length-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"};d.hasSeenBucketInCurrentSession=function(a){var b=this.getState().lastViewedThreadIndexForBucket;return b.get(a)!==void 0};d.getLastSeenThreadIndexForBucket=function(a){var b=this.getState().lastViewedThreadIndexForBucket;b=b.get(a);return b==void 0?0:b};d.$FBStoriesStore2=function(){return this.$FBStoriesStore4(this.getUserBucketData())};d.$FBStoriesStore1=function(){return this.getBucketByIndex(this.getSelectedBucketIndex())};d.getBucketByIndex=function(a){var b;return a===0?this.getUserBucketData():(b=this.getFriendsBucketData())!=null?b[a-1]:b};d.$FBStoriesStore8=function(a,b){b=this.$FBStoriesStore4(b);b=b.filter(function(b){return b.id===a});return b.length>0?b[0]:null};d.$FBStoriesStore4=function(a){return b("FBStoriesBucketHelper").getThreads(a)};d.$FBStoriesStore7=function(a){var c=this.getSelectedBucketOwner();a=this.getThreadsForSelectedBucket()[a];if(!a)return null;var d=b("FBStoriesThreadHelper").getMedia(a),e=b("FBStoriesThreadHelper").getWWWTextFormatMetadata(a),f=b("FBStoriesThreadHelper").getTextFormatMetadata(a),g=b("FBStoriesThreadHelper").getBackdropImage(a),h=b("FBStoriesThreadHelper").getMessageText(a),i=b("FBStoriesThreadHelper").getMessageRanges(a),j=b("FBStoriesThreadHelper").getDelightRanges(a),k=b("FBStoriesThreadHelper").getIsPlainText(a),l=b("FBStoriesThreadHelper").getInstagramProfileURL(a),m=b("FBStoriesThreadHelper").getOriginalPostStoryAttribution(a);return{isLive:!1,media:d,bucketOwner:c,threadOwner:b("FBStoriesThreadHelper").getOwner(a)||{name:null,id:null,is_viewer_friend:!1,profile_picture:null},participants:[],isSeen:b("FBStoriesThreadHelper").isSeenByViewer(a),latestMessageID:b("FBStoriesThreadHelper").getLatestMessageID(a),time:b("FBStoriesThreadHelper").getTime(a),threadID:b("FBStoriesThreadHelper").getId(a),cameraPostType:b("FBStoriesThreadHelper").getCameraPostType(a),cameraPostSource:b("FBStoriesThreadHelper").getCameraPostSource(a),wwwTextFormatMetadata:e,messageText:h,messageRanges:i,delightRanges:j,textFormatMetadata:f,backdropImage:g,instagramProfileURL:l,isPlainText:k,originalPostStoryAttribution:m,activityDescription:b("FBStoriesThreadHelper").getActivityDescription(a),withTags:b("FBStoriesThreadHelper").getWithTags(a),explicitLocation:b("FBStoriesThreadHelper").getExplicitLocation(a),inlineActivities:b("FBStoriesThreadHelper").getInlineActivities(a),defaultBackground:b("FBStoriesThreadHelper").getDefaultBackground(a),linkAttachment:b("FBStoriesThreadHelper").getLinkAttachment(a),mediaBackground:b("FBStoriesThreadHelper").getMediaBackground(a),negativeFeedbackActions:b("FBStoriesThreadHelper").getNegativeFeedbackActions(a)}};d.getThreadDataForSelectedLiveBucket=function(){var a=this.$FBStoriesStore1();return this.$FBStoriesStore9(a)};d.$FBStoriesStore9=function(a){if(!a)return null;var c=b("FBStoriesBucketHelper").getLiveVideo(a);if(!c||!this.$FBStoriesStore3(a))return null;var d=this.getSelectedBucketOwner();return{isLive:!0,media:c,bucketOwner:d,isSeen:!1,cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(a)}};d.isSelectedBucketLiveAndEnded=function(){return this.isSelectedBucketLive()&&b("FBStoriesBucketHelper").hasLiveVideoEnded(this.$FBStoriesStore1())};d.getIsCommercialBreakRunning=function(a){return!!this.getState().isCommercialBreakRunning.get(a)};d.getVideoMediaIdForBucketIndexAndThreadIndex=function(a,c){__p&&__p();a=this.getBucketByIndex(a);if(!a)return null;if(this.$FBStoriesStore3(a)){var d=this.$FBStoriesStore9(a);return(d=d)!=null?(d=d.media)!=null?d.id:d:d}d=this.$FBStoriesStore4(a);if(c<0||c>=d.length)return null;a=b("FBStoriesThreadHelper").getMedia(d[c]);if(!a)return null;return!b("CameraPostMediaHelper").isVideo(a)?null:a.id};d.isViewerOpen=function(){return this.getState().isViewerOpen};d.getCurrentViewerEntrypoint=function(){return this.getState().viewerEntrypoint};d.getCurrentThreadOverlays=function(){return b("FBStoriesThreadHelper").getStoryOverlays(this.getCurrentThreadForSelectedBucket())};d.isProductionDialogLoading=function(){return this.getState().isProductionDialogLoading};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("FBStoriesMutedBucketOwnersActions",["CurrentUser","FBLogger","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesMutedBucketOwnersActionTypes","FBStoriesMutedBucketOwnersStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch;a=function(){__p&&__p();function a(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesMutedBucketOwnersStore")])}var c=a.prototype;c.loadMutedOwners=function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADING}),b("promiseDone")(b("FBStoriesGraphQLAPI").loadMutedBucketOwnersList(),function(a){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADED,data:b("FBStoriesDataHelper").getMutedBucketOwnersFromLoadedQuery(a)})},function(){b("FBLogger")("fbstories").mustfix("failed to load muted bucket owners for: %s",b("CurrentUser").getID())})};c.setBucketOwnerMuted=function(a,c,d,e){b("promiseDone")(b("FBStoriesGraphQLAPI").muteBucketOwner(b("CurrentUser").getID(),a,e),function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!1})},function(){b("FBLogger")("fbstories").mustfix("failed to mute bucket with owner id: %s",a)}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!0}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC,ownerID:a,ownerName:c,ownerProfilePictureUri:d,value:e})};return a}();e.exports=new a()}),null);
__d("FBStoriesActionsHelper",["FBStoriesStore","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=function(a,c){__p&&__p();var d=c?a+1:a-1,e=0,f=b("FBStoriesStore").getLastSeenThreadIndexForBucket(a),h=b("FBStoriesStore").hasSeenBucketInCurrentSession(a),j=g[a];if(!j)j={prev:null,next:null,curThreadIdx:f},g[a]=j;else{h&&(j.curThreadIdx=f);h=j.next!=null?g[j.next]:null;f=j.prev!=null?g[j.prev]:null;if(c&&h!=null&&h.curThreadIdx!=null){h.prev=a;return{nextBucketIndex:b("nullthrows")(j.next),nextThreadIndex:h.curThreadIdx}}else if(!c&&f!=null&&f.curThreadIdx!=null){f.next=a;return{nextBucketIndex:b("nullthrows")(j.prev),nextThreadIndex:f.curThreadIdx}}}h=!1;while(h===!1&&!i.checkAllBucketsViewed(d))e=b("FBStoriesStore").getUnseenThreadIndex(d),h=e>=0,h||(d=c?d+1:d-1);if(h){c?b("nullthrows")(j).next=d:b("nullthrows")(j).prev=d;f=g[d];f||(g[d]={prev:null,next:null,curThreadIdx:e},f=g[d]);c?b("nullthrows")(f).prev=a:b("nullthrows")(f).next=a}return{nextBucketIndex:d,nextThreadIndex:e}},i={checkAllBucketsViewed:function(a){var c=b("FBStoriesStore").getBucketCount();return a>=c||a<0},resetNavMap:function(){g={}},getNextBucketAndThreadIndex:function(a,c){var d=c?a+1:a-1,e=0;if(b("FBStoriesStore").isUnseenMode()){a=h(a,c);d=a.nextBucketIndex;e=a.nextThreadIndex}else c||(e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d));return{nextBucketIndex:d,nextThreadIndex:e}}};e.exports=i}),null);
__d("FBStoriesDataHelper",["CameraPostTypesHelper","CurrentUser","FBLogger","FBStoriesActions","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDispatcher","FBStoriesGating","FBStoriesGraphQLAPI","dotAccess","friendsBucketSorter","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBucketsDataFromLoadedObject:function(a){__p&&__p();var c=g.getUserDataNodesFromLoadedObject(a);c=c[0];var d=g.getUserInfoFromLoadedObject(a);a=g.getFriendsBucketDataFromLoadedObject(a);a=a.reduce(function(a,c){var d=b("FBStoriesBucketHelper").getThreads(c);d=d&&d.length>0;var e=b("FBStoriesBucketHelper").getCameraPostType(c),f=b("CameraPostTypesHelper").isStoryNux(e),g=b("CameraPostTypesHelper").isStory(e),h=b("CameraPostTypesHelper").isEventStory(e),i=b("CameraPostTypesHelper").isPageStory(e),j=b("CameraPostTypesHelper").isGroupStory(e);e=b("CameraPostTypesHelper").isBirthdayStory(e);if(f)return a;if(!d)return b("FBStoriesBucketHelper").isLive(c)?a.concat([c]):a;return g||i||h||j||e?a.concat([c]):a},[]);var e=b("FBStoriesGating").shouldUseTrayMigration();e||a.sort(b("friendsBucketSorter")(d.userID));return{userInfo:d,userBucketData:c,friendsBucketData:a}},hasData:function(a){return!a?!1:g.getFriendsBucketDataFromLoadedObject(a).length>0&&g.getUserDataNodesFromLoadedObject(a).length>0},getFriendsBucketDataFromLoadedObject:function(a){var c=b("FBStoriesGating").shouldUseTrayMigration();if(c){return((c=a)!=null?(c=c.me)!=null?(c=c.unified_stories_buckets)!=null?c.nodes:c:c:c)||[]}return((c=a)!=null?(c=c.me)!=null?(c=c.friends_stories_buckets)!=null?c.nodes:c:c:c)||[]},getUserDataNodesFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.story_bucket)!=null?a.nodes:a:a:a)||[]},getUserInfoFromLoadedObject:function(a){var b;return{userName:(b=a)!=null?(b=b.me)!=null?b.name:b:b,userID:(b=a)!=null?(b=b.me)!=null?b.id:b:b,userGender:(b=a)!=null?(b=b.me)!=null?b.gender:b:b,userProfilePic:(b=a)!=null?(b=b.me)!=null?b.profile_picture:b:b}},getFriendsDataWithEndedLiveBucket:function(a,c,d){__p&&__p();if(!c||d||!b("FBStoriesBucketHelper").isLive(c))return a;var e=b("FBStoriesBucketHelper").getId(c);d=!1;a=a.reduce(function(a,f){if(b("FBStoriesBucketHelper").getId(f)===e){d=!0;var g=!b("FBStoriesBucketHelper").isLive(f);c&&g&&(b("FBStoriesBucketHelper").setLiveVideo(f,c.live_video),b("FBStoriesBucketHelper").setHasLiveVideoEnded(f,!0))}a.push(f);return a},[]);d||(b("FBStoriesBucketHelper").setHasLiveVideoEnded(c,!0),a=[c].concat(a));return a},getMutedBucketOwnersFromLoadedQuery:function(a){a=((a=a)!=null?(a=a.me)!=null?(a=a.unfollowees_for_camera_post_story)!=null?a.edges:a:a:a)||[];return a.map(function(a){var b,c,d;a=a.node;d=(d=a)!=null?d.id:d;c=(c=a)!=null?c.name:c;b=(b=a)!=null?(b=b.profile_picture)!=null?b.uri:b:b;a=(a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{id:d,name:c,profilePictureUri:a?a:b,muted:!0}})},loadData:function(a){b("promiseDone")(b("FBStoriesGraphQLAPI").load(),function(a){a=g.getBucketsDataFromLoadedObject(a);b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").LOADED,data:a})},a?a:function(a){a=a.errors;a.length>0&&a[0].message&&b("FBLogger")("fbstories").mustfix("Error loading user tray data, err msg: %s",a[0].message)})},loadPageBucketData:function(a,c){b("promiseDone")(b("FBStoriesGraphQLAPI").loadPageBucketStoryData(a),function(a){a=b("dotAccess")(a,"node.page_story_bucket.nodes");(a||a.length>0)&&(b("FBStoriesActions").resetStore(),b("FBStoriesActions").loadData(b("CurrentUser").getName(),b("CurrentUser").getID(),null,null,[babelHelpers["extends"]({},a[0])]))},c?c:function(c){c=c.errors;c.length>0&&c[0].message&&b("FBLogger")("fbstories").mustfix("Error loading page story data, page id: %s, err msg: %s",a,c[0].message)})}};e.exports=g}),null);
__d("FBStoriesLoggingHelper",["Banzai","DirectMessagingTypedLogger","FBLogger","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesStore","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h={_traySessionID:null,_viewerSessionID:null,_eventStartTimes:{},logStoryTrayLoad:function(a){__p&&__p();this._traySessionID=b("uuid")();var c=a.userBucketData;a=a.friendsBucketData;var d=b("FBStoriesBucketHelper").hasData(c),e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=new Map();b("FBStoriesBucketHelper").isLive(c)&&g++;a.forEach(function(a){__p&&__p();e++;b("FBStoriesBucketHelper").getUnseenCount(a)>0&&f++;b("FBStoriesBucketHelper").isLive(a)&&g++;var c=b("FBStoriesBucketHelper").getLoggingType(a);switch(c){case b("FBStoriesLoggingConstants").PAGE_STORY:h++;break;case b("FBStoriesLoggingConstants").EVENT_STORY:i++;break;case b("FBStoriesLoggingConstants").GROUP_STORY:j++;break;case b("FBStoriesLoggingConstants").STORY_PROMOTION:k++;break;case b("FBStoriesLoggingConstants").FOLLOWEE_STORY:l++;break;case b("FBStoriesLoggingConstants").FRIEND_STORY:m++;break;default:b("FBLogger")("fbstories").mustfix("storyOwnerType not found: %s",c)}c=b("FBStoriesBucketHelper").getOwnerId(a);var d=b("FBStoriesBucketHelper").getThreadIDs(a);if(b("FBStoriesBucketHelper").isLive(a)){a=(a=b("FBStoriesBucketHelper").getLiveVideo(a))!=null?a.id:a;a&&d.push(a)}n.set(c,d)});this._getLogger().setName(b("FBStoriesLoggingConstants").ACTION_TRAY_LOAD).setHasMyStory(d).setNumberStories(e).setNumberNewStories(f).setNumberLiveStories(g).setLiveStoriesInTray(g).setPageStoriesInTray(h).setGroupStoriesInTray(j).setEventStoriesInTray(i).setFolloweeStoriesInTray(l).setFriendStoriesInTray(m).setPromotionStoriesInTray(k).setClientStoryThreadIds(n).setTraySessionID(this._traySessionID).log()},storyLog:function(a,c,d){g==null&&(g=c);a===b("FBStoriesLoggingConstants").ACTION_OPEN_STORY&&!this._viewerSessionID&&(this._viewerSessionID=b("uuid")());var e=b("FBStoriesStore").getSelectedBucketCameraPostType(),f=b("FBStoriesStore").getSelectedBucketOwnerID(),h=b("FBStoriesStore").getSelectedBucketOwnerType(),i=b("FBStoriesStore").getThreadCountForSelectedBucket(),j=b("FBStoriesStore").getSelectedBucketUnseenCount()>0,k=b("FBStoriesStore").getSelectedBucketIndex();e=this._getLogger().setCameraPostType(e).setName(a).setSource(c==null?g:c).setStoryOwner(f).setStoryOwnerType(h).setThreadCount(i).setHasNewContent(j).setStoryIndex(k).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID).setTrackingString(d);e.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:a,source:c,story_owner:String(f),number_media:String(i)})},storyInsightsLog:function(a){b("Banzai").post("fb_stories_insights_logging_banzai",a.getData())},getLoggingMediaType:function(a){var b="unknown";a==="Photo"?b="photo":a==="Video"?b="video":a==="live"&&(b="live");return b},getMediaLogger:function(a,c,d){d=d||{cameraPostType:b("FBStoriesStore").getCurrentThreadCameraPostTypeForSelectedBucket(),storyOwnerFbid:b("FBStoriesStore").getSelectedBucketOwnerID(),storyOwnerType:b("FBStoriesStore").getSelectedBucketOwnerType(),mediaID:b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),mediaType:b("FBStoriesStore").getCurrentThreadMediaTypeForSelectedBucket(),viewers:b("FBStoriesStore").getCurrentThreadMediaViewerCountForSelectedBucket(),bucketIndex:b("FBStoriesStore").getSelectedBucketIndex(),threadIndex:b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket(),threadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),threadCount:b("FBStoriesStore").getThreadCountForSelectedBucket()};var e=d.cameraPostType,f=d.storyOwnerFbid,g=d.storyOwnerType,h=d.mediaID,i=d.mediaType,j=d.viewers,k=d.bucketIndex,l=d.threadIndex,m=d.threadID;d=d.threadCount;m=m?m.toString():"";i=this.getLoggingMediaType(i);c=c||b("FBStoriesLoggingConstants").SOURCES.UNKNOWN;return this._getLogger().setCameraPostType(e).setName(a).setSource(c).setStoryOwner(f).setStoryOwnerType(g).setMediaType(i).setClientMediaID(h).setNumberViewers(j).setCardID(m).setStoryIndex(k).setMediaIndex(l).setNumberMedia(d).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID).setExtraClientData(JSON.stringify({story_size:d}))},mediaLog:function(a,b,c){this.getMediaLogger(a,b,c).log()},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()},openMediaLog:function(a,c){var d=b("FBStoriesStore").getFeedTrackingData(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA);b("Banzai").post("stories_www_vpv_banzai",{media_id:b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),owner_id:b("FBStoriesStore").getSelectedBucketOwnerID()});b("Banzai").post("fb_stories_banzai_generic",{ft:d});h.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA,a,c)},deleteMediaLog:function(){h.mediaLog(b("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA)},openSeenSummaryLog:function(){h.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY)},storyNavigationLog:function(a){a=h.getMediaLogger(b("FBStoriesLoggingConstants").ACTION_STORY_NAVIGATION).setGesture(a);a.log();h.storyInsightsLog(a)},closeStoryLog:function(a,c){var d=b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY;a=h.getMediaLogger(b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY).setGesture(a).setActionSource(c);a.log();h.storyInsightsLog(a);a=b("FBStoriesStore").getSelectedBucketOwnerID();var e=b("FBStoriesStore").getThreadCountForSelectedBucket();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:d,source:c,story_owner:String(a),number_media:String(e)});this._viewerSessionID=null}};e.exports=h}),null);
__d("FBStoriesPrefetcher",["Bootloader","FBStoriesActionsHelper","FBStoriesStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={prefetchForCurrentThreadAndBucket:function(){this.prefetch(b("FBStoriesStore").getSelectedBucketIndex(),b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},prefetch:function(a,b){this._prefetchVideos(a,b)},_prefetchVideos:function(a,b){this._prefetchThreadVideo(a,b),this._prefetchForwardVideo(a,b),this._prefetchBackwardsVideo(a,b)},_prefetchForwardVideo:function(a,b){this._prefetchVideo(!0,a,b)},_prefetchBackwardsVideo:function(a,b){this._prefetchVideo(!1,a,b)},_prefetchVideo:function(a,c,d){__p&&__p();var e=b("FBStoriesStore").getThreadCount(c);d=a?d+1:d-1;while(d>=0&&d<e){if(this._prefetchThreadVideo(c,d))return!0;d=a?d+1:d-1}d=c;while(!b("FBStoriesActionsHelper").checkAllBucketsViewed(d)){e=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(d,a);c=e.nextBucketIndex;e=e.nextThreadIndex;if(this._prefetchThreadVideo(c,e))return!0;d=c}return!1},_prefetchThreadVideo:function(a,c){var d=b("FBStoriesStore").getVideoMediaIdForBucketIndexAndThreadIndex(a,c);if(!d)return!1;b("Bootloader").loadModules(["VideoPlayerMetaData"],function(a){a.genVideoData(d,{allowDashPrefetch:!0,forceHD:!0})},"FBStoriesPrefetcher");return!0}};e.exports=a}),null);
__d("PageActionURLHandlerType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ASYNC_DIALOG:"async-dialog",ASYNC_POST:"async-post",DIALOG:"dialog",DIALOG_POST:"dialog-post",LINK_OUT:"link-out",LINK_OUT_NEW_TAB:"link-out-new-tab"})}),null);
__d("PageActionBarActionSelector.react",["ix","fbt","ContextualDialogArrow","Image.react","PageActionURLHandlerType","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PopoverMenu.react","React","ReactXUIMenu","URI","VideoPageThemedActionBarButton.react","XUIButton.react","asset","cxMargin","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ReactXUIMenu").Item,k=function(a){__p&&__p();var c=function(c){b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_ACTIONS,"pages__header__action_bar",["page_consumer_experience"],{action:c})};return b("React").jsx(b("ReactXUIMenu"),{children:a.actions.map(function(d){if(!d.url||!d.label||!d.label.text)return null;b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_ACTIONS,"pages__header__action_bar",["page_consumer_experience"],{action:d.__typename});var e=b("PageActionURLHandlerType")[d.url_handler_type]||null,f=d.url;(e==="async-dialog"||e==="async-post"||e==="dialog")&&(f=new(i||(i=b("URI")))(d.url).getUnqualifiedURI().toString());var g=function(){return c(d.__typename)};return b("React").jsx(j,{href:f,onClick:g,rel:e,target:e==="link-out-new-tab"?"_blank":"_self",children:d.label.text},d.label.text)})})};a=function(a){if(a.actions.length===0)return null;var c=a.videoPageThemeColor;return b("React").jsx(b("PopoverMenu.react"),{alignh:"right",layerBehaviors:[b("ContextualDialogArrow")],menu:k(a),children:c==null?b("React").jsx(b("XUIButton.react"),{haschevron:!1,image:b("React").jsx(b("Image.react"),{src:g("127000")}),label:h._("More"),labelIsHidden:!0,size:a.size||"large"}):b("React").jsx(b("VideoPageThemedActionBarButton.react"),{className:"_3-99",image:b("React").jsx(b("Image.react"),{src:g("484386")}),isBgFilled:!1,label:h._("More"),labelIsHidden:!0,videoPageThemeColor:c})})};e.exports=a}),null);
__d("PageActionContainer.react",["React"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.action.ReactComponent;return!c?null:b("React").jsx(c,babelHelpers["extends"]({},a))};e.exports=a}),null);
__d("PageActionOpenURLAsyncDialog.react",["cx","AsyncDialog","AsyncRequest","React","URI","VideoPageThemedActionBarButton.react","XUIButton.react","cxMargin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("AsyncDialog").send(new(b("AsyncRequest"))(new(h||(h=b("URI")))(d.props.action.url).getUnqualifiedURI())).setRelativeTo(babelHelpers.assertThisInitialized(d))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.action,c=a.label,d=a.url;a=a.hideButtonText;if(c===null||d===null)return null;d=this.props.videoPageThemeColor;return d==null?b("React").jsx(b("XUIButton.react"),{className:"_rfh",image:this.props.image,label:c.text,labelIsHidden:a,onClick:this.$1,size:this.props.size}):b("React").jsx(b("VideoPageThemedActionBarButton.react"),{className:"_3-99",image:this.props.image,isBgFilled:!1,label:c.text,labelIsHidden:a,onClick:this.$1,videoPageThemeColor:d})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PageActionOpenURLLinkOut.react",["cx","PageActionURLHandlerType","React","Tooltip","URI","VideoPageThemedActionBarButton.react","XUIButton.react","cxMargin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=14;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PageActionURLHandlerType")[d.props.action.url_handler_type]==="link-out-new-tab"?(h||(h=b("URI"))).goURIOnWindow(d.props.action.url,window.open("","_blank"),!0):(h||(h=b("URI"))).go(d.props.action.url)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.action,c=a.label;a=a.url;if(c===null||a===null)return null;a=this.props.videoPageThemeColor;a=a==null?b("React").jsx(b("XUIButton.react"),{className:"_rfh",image:this.props.image,label:c.text,onClick:this.$1,size:this.props.size}):b("React").jsx(b("VideoPageThemedActionBarButton.react"),{className:"_3-99",image:this.props.image,isBgFilled:!1,label:c.text,onClick:this.$1,videoPageThemeColor:a});c.text.length>=i&&(a=b("React").cloneElement(a,b("Tooltip").propsFor(c.text)));return a};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesMessengerLinkConfirmationDialog.react",["ix","cx","fbt","Image.react","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","XUIText.react","cxMargin","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=494;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c;return(c=b("React")).jsxs(b("XUIDialog.react"),{shown:this.props.shown,onToggle:function(b){return!b&&a.props.onDismiss},width:j,children:[c.jsxs(b("XUIDialogBody.react"),{className:"_3-95 _3pa-",children:[c.jsx(b("Image.react"),{className:"_3-97 _3-8x",src:"/images/pages/linkshare/checkmark.png"}),c.jsx(b("XUIText.react"),{size:"header3",display:"block",children:i._("The Messenger link has been copied.")}),c.jsx(b("XUIText.react"),{className:"_3-8y",display:"block",size:"header4",children:i._("The Messenger link has been copied to your clipboard. Any person who clicks this link will be able to initiate a conversation with your Page.")})]}),c.jsx(b("XUIDialogFooter.react"),{className:"_3pa_",fullbleedborder:"true",leftContent:c.jsxs("div",{children:[c.jsx(b("Image.react"),{className:"_1-vn _3-8_",src:g("126379")}),c.jsx(b("XUIGrayText.react"),{children:this.props.url})]}),children:c.jsx(b("XUIDialogButton.react"),{use:"confirm",label:i._("Done"),onClick:this.props.onDismiss})})]})};return c}(b("React").Component);e.exports=a}),null);
__d("XPagesOnlineIndicatorAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/show_online_indicator/",{page_id:{type:"FBID",required:!0}})}),null);
__d("PagesMessageButton.react",["cx","fbt","ix","AsyncRequest","ChatOpenTabEventLogger","Clipboard","ContextualDialogArrow","ContextualLayerUpdateOnScroll","FantaTabActions","Image.react","InlineBlock.react","MenuSeparator.react","MercuryIDs","PagesEventObserver","PagesMessengerLinkConfirmationDialog.react","PopoverMenu.react","PopoverMenuShowOnHover","React","ReactXUIMenu","XBasicFBNuxDismissController","XPagesMessageCallToActionSendController","XPagesOnlineIndicatorAsyncController","XUIAmbientNUX.react","XUIButton.react","asset","joinClasses","qex"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactXUIMenu").Item,k=3997;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$4=function(a){a=d.props.pageID;var c=b("MercuryIDs").getThreadIDFromUserID(a);b("FantaTabActions").openTab(c,[d.props.settings.ref]);b("ChatOpenTabEventLogger").logUserClickOpen(d.props.settings.ref,a);c=(c=b("qex")._("1164632"))!=null?c:!1;if(c){c=b("XPagesMessageCallToActionSendController").getURIBuilder().setInt("page_id",a).getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(c).send()}};d.$6=function(a){a=d.props.settings.adminSettings&&d.props.settings.adminSettings.messengerLinkURI;if(!a)return;b("Clipboard").copy(a);d.setState({linkDialogShown:!0});b("PagesEventObserver").notify("shared_message_link_copy",d.props.pageID,{source:"source:pages:message_shortlink"})};d.$7=function(){d.setState({linkDialogShown:!1})};d.$9=function(){d.setState({nuxDismissed:!0})};d.$10=function(){d.setState({messengerLinkNUXDismissed:!0});var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",k).getURI();new(b("AsyncRequest"))().setURI(a).send()};d.state={isOnline:!1,linkDialogShown:!1,messengerLinkNUXDismissed:!1,nuxDismissed:!1};return d}var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this,c=b("XPagesOnlineIndicatorAsyncController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(b){b=b.payload;a.setState({isOnline:b.showOnlneIndicator})}).send()};c.getButtonSize=function(a){return b("XUIButton.react").getButtonSize(a)};d.componentDidMount=function(){b("PagesEventObserver").notify("messages_button_render",this.props.pageID,{source:"refresh",logged_out:!this.props.settings.isLoggedIn,ref:this.props.settings.ref})};d.render=function(){__p&&__p();if(!this.props.settings.isLoggedIn)return null;var a=h._("Message");this.props.settings.adminSettings||(this.props.className?a=h._("Send Message"):this.props.settings.label&&(a=h._("{settings_label}",[h._param("settings_label",this.props.settings.label)])));var c=this.props.pageCategory==="WORKPLACE_BOT",d=c?i("701295"):i("481153");c=c?i("701294"):i("548580");var e=null;if(this.props.settings.adminSettings)e=b("React").jsxs(b("PopoverMenu.react"),{alignh:"right",behaviors:[b("PopoverMenuShowOnHover")],className:b("joinClasses")(this.props.className,"_3u42"),layerBehaviors:[b("ContextualDialogArrow")],menu:this.$1(),children:[e,this.$2()]});else{var f=b("joinClasses")(this.props.className,this.props.isInHovercard?null:"_p8f");c=this.props.isSecondaryAction||this.props.isInHovercard?c:d;e=b("React").jsx(b("XUIButton.react"),{className:f,"data-testid":"page-message-button",image:b("React").jsx(b("Image.react"),{src:c}),imageRight:this.$3(),label:a,onClick:this.$4,ref:"messageButton",size:this.props.size})}return b("React").jsxs(b("InlineBlock.react"),{alignv:"middle",className:"_3u43 _p8r",children:[e,this.$5()]})};d.$3=function(){return!this.state.isOnline?null:b("React").jsx("span",{className:"_ljx",children:b("React").jsx(b("Image.react"),{src:i("311942")})})};d.$1=function(){if(!this.props.settings.adminSettings)return null;var a=null;this.props.settings.adminSettings.messengerLinkURI&&(a=b("React").jsx(j,{onclick:this.$6,children:h._("Copy Messenger Link")}));return b("React").jsxs(b("ReactXUIMenu"),{children:[b("React").jsx(j,{href:this.props.settings.adminSettings.inboxURI,children:h._("View Messages")}),this.props.settings.adminSettings.messengerLinkURI?b("React").jsx(b("MenuSeparator.react"),{}):null,a]})};d.$2=function(){var a=this.props.settings.adminSettings&&this.props.settings.adminSettings.messengerLinkURI;return!a?null:b("React").jsx(b("PagesMessengerLinkConfirmationDialog.react"),{onDismiss:this.$7,shown:this.state.linkDialogShown,url:a})};d.$5=function(){var a=this;if(this.props.settings.adminSettings&&this.props.settings.adminSettings.showMessengerLinkNUX)return this.$8();if(!this.props.settings.showNUX)return null;var c=this.props.pageCategory==="WORKPLACE_BOT"?h._("Send a message to this Bot."):h._("Send a message to this Page.");return b("React").jsx(b("XUIAmbientNUX.react"),{alignment:"center",behaviors:{ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextRef:function(){return a.refs.messageButton},onCloseButtonClick:this.$9,position:"below",shown:!this.state.nuxDismissed,width:"auto",children:c})};d.$8=function(){var a=this;return!this.props.settings.adminSettings||!this.props.settings.adminSettings.showMessengerLinkNUX?null:b("React").jsx(b("XUIAmbientNUX.react"),{alignment:"right",autofocus:!1,behaviors:{ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextRef:function(){return a.refs.messageButton},onCloseButtonClick:this.$10,position:"below",shown:!this.state.messengerLinkNUXDismissed,width:"wide",children:h._("You can now share a direct link that makes it easy for people to message your Page.")})};return c}(b("React").Component);e.exports=a}),null);
__d("PageMessageAction.react",["PagesMessageButton.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.action;return b("React").jsx(b("PagesMessageButton.react"),{className:this.props.className,icon:this.props.icon,isSecondaryAction:this.props.isSecondaryAction,pageID:a.messaging_page.id,pageCategory:a.page.category_type,settings:{adminSettings:a.admin_inbox_url?{inboxURI:a.admin_inbox_url,messengerLinkURI:a.admin_messenger_link_url,showMessengerLinkNUX:a.admin_show_messenger_link_nux}:null,isLoggedIn:!0,ref:a.messaging_page.id===a.page.id?"fb_page:secondary_message_button":"fb_page:locations_child_page_message_cta",showNUX:a.show_nux,label:a.label.text},size:this.props.size})};return c}(b("React").Component);e.exports=a}),null);
__d("PageSaveAction.react",["ix","fbt","ContextualDialogArrow","Image.react","PageActionOpenURLAsyncPost.react","PageActionURLHandlerType","PopoverMenu.react","PopoverMenuShowOnHover","React","ReactXUIMenu","URI","XSavedForLaterDashboardController","XUIPopoverButton.react","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ReactXUIMenu").Item;a=function(a){var c=a.action,d=c.url,e=c.url_handler_type;c=c.page;if(!c.has_viewer_saved)return b("React").jsx(b("PageActionOpenURLAsyncPost.react"),babelHelpers["extends"]({},a,{image:b("React").jsx(b("Image.react"),{src:g("127260")})}));c=b("React").jsxs(b("ReactXUIMenu"),{children:[b("React").jsx(j,{href:new(i||(i=b("URI")))(d).getUnqualifiedURI(),rel:b("PageActionURLHandlerType")[e]||null,children:h._("Unsave")},"unsave"),b("React").jsx(j,{href:b("XSavedForLaterDashboardController").getURIBuilder().getURI(),children:h._("View saved items")},"view_saved")]});return b("React").jsx(b("PopoverMenu.react"),{behaviors:[b("PopoverMenuShowOnHover")],layerBehaviors:[b("ContextualDialogArrow")],menu:c,children:b("React").jsx(b("XUIPopoverButton.react"),{image:b("React").jsx(b("Image.react"),{src:g("116046")}),label:h._("Saved"),size:"large"})})};e.exports=a}),null);
__d("PageSharePageAction.react",["ix","Image.react","PageActionOpenURLAsyncDialog.react","React","asset"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").jsx(b("PageActionOpenURLAsyncDialog.react"),babelHelpers["extends"]({},a,{action:babelHelpers["extends"]({},a.action,{hideButtonText:!!a.videoPageThemeColor}),image:b("React").jsx(b("Image.react"),{src:a.videoPageThemeColor==null?g("363825"):g("484394")})}))};e.exports=a}),null);
__d("PageSwitchRegionAction.react",["ix","Image.react","PageActionOpenURLAsyncDialog.react","React","fbglyph"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").jsx(b("PageActionOpenURLAsyncDialog.react"),babelHelpers["extends"]({},a,{image:b("React").jsx(b("Image.react"),{src:g("128018")})}))};e.exports=a}),null);
__d("ProfileSubFollowStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REGULAR_FOLLOW:"follow",RECAP:"recap",SEE_FIRST:"see_first",SEE_MORE:"see_more",HIGHLIGHTS_ONLY:"highlights_only",SUBSCRIBE_ALL_LIVE_NOTIFICATIONS:"subscribe_all_live_notifications",SUBSCRIBE_SUGGESTED_LIVE_NOTIFICATIONS:"subscribe_suggested_live_notifications",SUBSCRIBE_NONE_LIVE_NOTIFICATIONS:"subscribe_none_live_notifications",UNFOLLOW:"unfollow"})}),null);
__d("PagesHeaderFollowButton.react",["ix","cx","fbt","Arbiter","BasicFBNux","ContextualDialogArrow","Image.react","Link.react","PageGetNotificationUtil","PagesButton.react","PagesLikeFollowHelper","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PopoverMenu.react","PopoverMenuOverlappingBorder","PopoverMenuShowOnHover","ProfileSubFollowStatus","React","ReactXUIMenu","SnoozedProfileTypedLogger","SubscribeButton","VideoPageThemedActionBarButton.react","XUIAmbientNUX.react","XUIButton.react","XUIMenuSeparator.react","XUIPopoverButton.react","XUIText.react","asset","fbglyph","uuid"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactXUIMenu").SelectableMenu,k=b("ReactXUIMenu").Item,l=4225,m=5571;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$8=function(){d.props.snoozeStatus&&new(b("SnoozedProfileTypedLogger"))().setEvent("cancel_end_snooze").setItemObjID(d.props.pageID).setSessionID(d.$1).log()},d.$9=function(a){d.$11();b("PagesLikeFollowHelper").onFollowChangeWithTrackingData(a.target,d.props.pageID,!0,d.props.followLocation,null,d.props.qocDialogButton);d.props.shouldShowFollowPrivacyNux&&(d.setState({privacyNuxShown:!0}),b("BasicFBNux").onView(l));if(d.props.qocDialogButton){a=d.props.pageID;b("Arbiter").inform(b("SubscribeButton").SUBSCRIBED,{profile_id:a,suppress:!0})}},d.$12=function(a){d.$11();b("PagesLikeFollowHelper").onFollowChangeWithTrackingData(a.target,d.props.pageID,!1,d.props.followLocation,null,d.props.qocDialogButton);b("PagesLikeFollowHelper").onUnfollowWithConfirmation(d.props.pageID);if(d.props.qocDialogButton){a=d.props.pageID;b("Arbiter").inform(b("SubscribeButton").UNSUBSCRIBED,{profile_id:a,suppress:!0})}},c)||babelHelpers.assertThisInitialized(d)}c.getButtonSize=function(a){return b("XUIButton.react").getButtonSize(a)};var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=b("uuid")(),this.props.shouldShowFollowButtonNux===!0&&b("BasicFBNux").onView(m),this.setState({privacyNuxShown:!1,followButtonNuxShown:this.props.shouldShowFollowButtonNux})};d.componentWillUnmount=function(){this.$1=null};d.render=function(){__p&&__p();if(!this.props.followAllowed)return null;var a,c;if(this.props.snoozeStatus)a=this.$2(),c=this.$3(),new(b("SnoozedProfileTypedLogger"))().setEvent("profile_visit").setItemObjID(this.props.pageID).setSessionID(this.$1).log();else{if(!this.props.followStatus)return this.$4();else if(this.props.disableDropdown)return this.$5();a=this.$6();c=this.$7()}c=b("React").jsx(b("PopoverMenu.react"),{alignh:"right",behaviors:[b("PopoverMenuOverlappingBorder"),b("PopoverMenuShowOnHover")],layerBehaviors:[b("ContextualDialogArrow")],menu:b("React").jsx(j,{className:"_4bje"+(this.props.snoozeStatus?" _3qn5":""),multiple:!0,children:c}),onHide:this.$8,children:a});return this.props.asPrimaryButton==="true"?b("React").jsx("div",{className:"_6534",children:c}):c};d.$4=function(){var a=this.props.videoPageThemeColor;if(a)return b("React").jsx(b("VideoPageThemedActionBarButton.react"),{"data-testid":this.props.origin+"_follow_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("488981")}),isBgFilled:!0,label:i._("Follow"),onClick:this.$9,ref:"followButton",videoPageThemeColor:a});if(this.props.blueFollowButton)return b("React").jsx(b("PagesButton.react"),{color:"fbblue",image:b("React").jsx(b("Image.react"),{className:"ctaButtonIcon",src:g("114929")}),label:b("React").jsx("span",{className:"blueButtonLabel",children:i._("Follow")}),onClick:this.$9});return this.props.asPrimaryButton==="true"?b("React").jsxs("span",{className:"_6534 uiContextualLayerParent",children:[b("React").jsx(b("XUIButton.react"),{"data-testid":this.props.origin+"_follow_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("114929")}),label:i._("Follow"),onClick:this.$9,ref:"followButton",size:this.props.size||"large",use:"confirm"}),this.$10()]}):b("React").jsx(b("XUIButton.react"),{"data-testid":this.props.origin+"_follow_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("127712")}),label:i._("Follow"),onClick:this.$9,size:this.props.size})};d.$11=function(){b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_ACTIONS,"pages__header__action_bar",["page_consumer_experience"],{action:this.props.logAction})};d.$5=function(){return this.props.blueFollowButton?b("React").jsx(b("PagesButton.react"),{color:"fbblue",image:b("React").jsx(b("Image.react"),{className:"ctaButtonIcon",src:g("114932")}),label:b("React").jsx("span",{className:"blueButtonLabel",children:i._("Following")}),onClick:this.$12}):b("React").jsx(b("XUIButton.react"),{image:this.props.qocDialogButton?b("React").jsx(b("Image.react"),{src:g("116170")}):b("React").jsx(b("Image.react"),{src:g("116498")}),label:i._("Following"),onClick:this.$12,size:this.props.size})};d.$6=function(){var a=this.props.videoPageThemeColor;if(a)return b("React").jsx(b("VideoPageThemedActionBarButton.react"),{"data-testid":this.props.origin+"_followed_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("602176")}),isBgFilled:!1,label:i._("Following"),ref:"followedButton",videoPageThemeColor:a});return this.props.asPrimaryButton==="true"?b("React").jsxs("div",{children:[b("React").jsx(b("XUIPopoverButton.react"),{"data-testid":this.props.origin+"_followed_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("116533")}),label:i._("Following"),ref:"followedButton",size:this.props.size||"large"}),this.renderLayers()]}):b("React").jsxs("div",{children:[b("React").jsx(b("XUIPopoverButton.react"),{"data-testid":this.props.origin+"_followed_button_test_id",image:b("React").jsx(b("Image.react"),{src:g("116498")}),label:i._("Following"),ref:"followedButton",size:this.props.size}),this.renderLayers()]})};d.$2=function(){return b("React").jsx("div",{children:b("React").jsx(b("XUIPopoverButton.react"),{className:this.props.origin==="hovercard"?"_29kr":"",image:b("React").jsx(b("Image.react"),{src:g("396312")}),label:(this.props.snoozeData||{}).stateText,ref:"snoozedButton",size:this.props.size})})};d.renderLayers=function(){var a=this;return b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.followedButton},shown:this.state.privacyNuxShown,position:"right",onCloseButtonClick:function(){return a.$13()},children:i._("You can control who can see the people, Pages and lists you follow {hyperlink for help center}.",[i._param("hyperlink for help center",b("React").jsx(b("Link.react"),{href:"/ajax/timeline/friends/edit_dialog.php",rel:"dialog",children:i._("here")}))])},"ambientNUX")};d.$13=function(){this.setState({privacyNuxShown:!1}),b("BasicFBNux").onDismiss(l)};d.$10=function(){var a=this;return b("React").jsxs(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.followButton},onCloseButtonClick:function(){return a.$14()},position:"below",shown:this.state.followButtonNuxShown,children:[b("React").jsx(b("Image.react"),{className:"_2tv4",src:g("418478")}),b("React").jsx("div",{className:"_2tv5",children:i._("Follow this show to get new episodes in your watchlist on Facebook Watch.")})]},"ambientNUX")};d.$14=function(){this.setState({followButtonNuxShown:!1}),b("BasicFBNux").onDismiss(m)};d.$3=function(){var a=this;return[b("React").jsxs(k,{className:"_10it",onclick:function(){b("PagesLikeFollowHelper").onSnoozeChange(a.props.pageID,!1),new(b("SnoozedProfileTypedLogger"))().setEvent("end_snooze").setItemObjID(a.props.pageID).setSessionID(a.$1).log()},children:[b("React").jsx(b("XUIText.react"),{size:"meta1",display:"block",children:(this.props.snoozeData||{}).actionText}),b("React").jsx(b("XUIText.react"),{size:"meta1",className:"_34kz",children:(this.props.snoozeData||{}).timeLeftText})]},"Unsnooze."+this.props.pageID)]};d.$7=function(){var a,c=b("PageGetNotificationUtil").isNotifStatusOn(this.props.notifStatus);return[b("React").jsx(k,{"data-testid":"page_unfollow_item_test_id",onclick:this.$12,children:i._("Unfollow this Page")},"Unfollow."+this.props.pageID),b("React").jsx(b("XUIMenuSeparator.react"),{},"follow_seperator"),(a=b("PagesLikeFollowHelper")).newsfeedTitleMenuItem(this.props.pageID),a.newsfeedMenuItem(this.props.pageID,b("ProfileSubFollowStatus").SEE_FIRST,this.props.newsFeedStatus),a.newsfeedMenuItem(this.props.pageID,b("ProfileSubFollowStatus").REGULAR_FOLLOW,this.props.newsFeedStatus),a.newsfeedMenuItem(this.props.pageID,b("ProfileSubFollowStatus").UNFOLLOW,this.props.newsFeedStatus),a.notificationTitleMenuItem(this.props.pageID),a.notificationMenuItem(this.props.pageID,!0,c,this.props.notifStatus),a.notificationMenuItem(this.props.pageID,!1,!c,this.props.notifStatus)]};return c}(b("React").Component);e.exports=a}),null);
__d("PagesHeaderFollowButtonContainer.react",["FluxContainer","PageNewsFeedStore","PagesFollowStore","PagesGetNotificationStore","PagesHeaderFollowButton.react","PagesLikeFollowNotifDispatcher","PagesLikeStore","PagesSnoozeStore","React","XUIButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getButtonSize=function(a){return b("XUIButton.react").getButtonSize(a)};c.getStores=function(){return[b("PagesLikeStore"),b("PagesFollowStore"),b("PagesSnoozeStore"),b("PageNewsFeedStore"),b("PagesGetNotificationStore")]};c.calculateState=function(a,c){a=b("PagesLikeStore").getState();var d=b("PagesFollowStore").getState(),e=b("PagesSnoozeStore").getState()[c.pageID]||{},f=b("PagesGetNotificationStore").getState(),g=b("PageNewsFeedStore").getState();g={pageID:c.pageID,pageName:c.pageName,actorID:c.actorID,followAllowed:c.followAllowed,followLocation:c.followLocation,newsFeedStatus:g[c.pageID],disableDropdown:c.disableDropdown,shouldShowFollowPrivacyNux:c.shouldShowFollowPrivacyNux,likeStatus:a[c.pageID],followStatus:d[c.pageID],snoozeStatus:e.status,snoozeData:e.data,notifStatus:babelHelpers["extends"]({},f[c.pageID]),origin:c.origin,size:c.size,showUnpublishPageDialog:c.showUnpublishPageDialog,blueFollowButton:c.blueFollowButton,asPrimaryButton:c.asPrimaryButton,shouldShowFollowButtonNux:c.shouldShowFollowButtonNux,videoPageThemeColor:c.videoPageThemeColor,qocDialogButton:c.qocDialogButton,logAction:c.logAction};return g};var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("PagesLikeFollowNotifDispatcher").explicitlyRegisterStores([b("PagesLikeStore"),b("PagesFollowStore"),b("PagesSnoozeStore"),b("PageNewsFeedStore"),b("PagesGetNotificationStore")]),b("PagesLikeFollowNotifDispatcher").dispatch({data:this.props,type:"init_data"})};d.render=function(){return b("React").jsx(b("PagesHeaderFollowButton.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesHeaderGamesNotificationButton.react",["ix","cx","fbt","ContextualDialogArrow","FDSButton.react","Image.react","PageGetNotificationUtil","PageLikeButton","PagesLikeFollowHelper","PagesLikeFollowNotifDispatcher","PopoverMenu.react","PopoverMenuOverlappingBorder","PopoverMenuShowOnHover","React","ReactXUIMenu","XUIMenuSeparator.react","XUIPopoverButton.react","asset","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactXUIMenu").SelectableMenu,k=b("ReactXUIMenu").Item;function l(a){return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("493831")}),label:i._("Favourite"),onClick:a.onFollowClick})}function m(){return b("React").jsx(b("XUIPopoverButton.react"),{image:b("React").jsx(b("Image.react"),{src:g("116170")}),label:i._("Favourited"),size:"large"})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PageLikeButton").doLikeAction(a.target,d.props.pageID,d.props.origin,d.props.actorID),b("PagesLikeFollowNotifDispatcher").dispatch({data:{pageID:d.props.pageID,state:"on",type:"live_video"},type:"notif_change"})},d.$2=function(a){b("PageLikeButton").doUnlikeAction(a,d.props.pageID,d.props.origin,d.props.actorID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(){var a,c=b("PageGetNotificationUtil").isNotifStatusOn(this.props.notifStatus);return[b("React").jsx(k,{onclick:this.$2,children:i._("Unfavourite")},"Unfollow."+this.props.pageID),b("React").jsx(b("XUIMenuSeparator.react"),{},"follow_seperator"),(a=b("PagesLikeFollowHelper")).newsfeedTitleMenuItem(this.props.pageID),a.newsfeedMenuItem(this.props.pageID,"see_first",this.props.newsFeedStatus),a.newsfeedMenuItem(this.props.pageID,"follow",this.props.newsFeedStatus),a.newsfeedMenuItem(this.props.pageID,"unfollow",this.props.newsFeedStatus),a.notificationTitleMenuItem(this.props.pageID),a.notificationMenuItem(this.props.pageID,!0,c,this.props.notifStatus),a.notificationMenuItem(this.props.pageID,!1,!c,this.props.notifStatus)]};d.render=function(){return this.props.isSubscribed?b("React").jsx(b("PopoverMenu.react"),{alignh:"right",behaviors:[b("PopoverMenuOverlappingBorder"),b("PopoverMenuShowOnHover")],layerBehaviors:[b("ContextualDialogArrow")],menu:b("React").jsx(j,{className:"_4bje",multiple:!0,children:this.$3()}),children:b("React").jsx(m,{})}):b("React").jsx(l,{onFollowClick:this.$1})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesHeaderGamesNotificationContainer.react",["FluxContainer","PageNewsFeedStore","PagesFollowStore","PagesGetNotificationStore","PagesHeaderGamesNotificationButton.react","PagesLikeFollowNotifDispatcher","PagesLikeStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesFollowStore"),b("PagesGetNotificationStore"),b("PagesLikeStore"),b("PageNewsFeedStore")]};c.calculateState=function(a,c){a=b("PagesLikeStore").getState();var d=b("PagesFollowStore").getState();return{actorID:c.actorID,followLocation:c.followLocation,isSubscribed:a[c.pageID]||d[c.pageID],newsFeedStatus:b("PageNewsFeedStore").getState()[c.pageID],notifStatus:babelHelpers["extends"]({},b("PagesGetNotificationStore").getState()[c.pageID]),origin:c.origin,pageID:c.pageID}};var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("PagesLikeFollowNotifDispatcher").explicitlyRegisterStores([b("PagesFollowStore"),b("PagesGetNotificationStore"),b("PagesLikeStore"),b("PageNewsFeedStore")]),b("PagesLikeFollowNotifDispatcher").dispatch({data:this.props,type:"init_data"})};d.render=function(){return b("React").jsx(b("PagesHeaderGamesNotificationButton.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("XRecommendPageDeleteRecommendationDialogAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/recommendation/action_bar/delete_dialog/",{page_id:{type:"FBID",required:!0},__asyncDialog:{type:"Int"}})}),null);
__d("PagesHeaderRecommendPageButton.react",["ix","cx","fbt","AsyncDialog","AsyncRequest","ContextualDialogArrow","Image.react","PopoverMenu.react","PopoverMenuOverlappingBorder","PopoverMenuShowOnHover","React","ReactXUIMenu","URI","XRecommendPageComposerDialogAsyncController","XRecommendPageDeleteRecommendationDialogAsyncController","XUIButton.react","XUIPopoverButton.react","XPagesProfileReviewsController","asset","goURI","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").SelectableMenu,l=b("ReactXUIMenu").Item;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a=b("XRecommendPageComposerDialogAsyncController").getURIBuilder().setFBID("page_id",String(d.props.pageID)).setEnum("surface","page_recommendation_action_bar").setEnum("ref_type","page_recommendation_action_bar");d.props.canRecommendWithType&&a.setEnum("recommendation_type","positive");b("AsyncDialog").send(new(b("AsyncRequest"))(new(j||(j=b("URI")))(a.getURI()).getUnqualifiedURI()))},d.$2=function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(b("XRecommendPageDeleteRecommendationDialogAsyncController").getURIBuilder().setFBID("page_id",String(d.props.pageID)).getURI().getUnqualifiedURI()))},d.$3=function(a){b("goURI")(b("XPagesProfileReviewsController").getURIBuilder().setString("page_token",d.props.pageURIToken).getURI())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){if(this.props.isRecommended&&this.props.canRecommendWithType){var a=b("gkx")("678726")?b("React").jsx(l,{children:i._("Edit recommendation")},"editRecommendation."+this.props.pageID):null;return b("React").jsx(b("PopoverMenu.react"),{alignh:"right",behaviors:[b("PopoverMenuOverlappingBorder"),b("PopoverMenuShowOnHover")],layerBehaviors:[b("ContextualDialogArrow")],menu:b("React").jsxs(k,{multiple:!0,children:[a,b("React").jsx(l,{onClick:this.$3,children:i._("View recommendation")},"viewRecommendation."+this.props.pageID),b("React").jsx(l,{onClick:this.$2,children:i._("Delete recommendation")},"deleteRecommendation."+this.props.pageID)]}),children:b("React").jsx(b("XUIPopoverButton.react"),{image:b("React").jsx(b("Image.react"),{src:g("548195")}),label:i._("Recommended"),size:"large"})})}else return b("React").jsx(b("XUIButton.react"),{className:"_rfh",image:b("React").jsx(b("Image.react"),{src:g("548196")}),label:i._("Recommend"),onClick:this.$1,size:"large"})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesRecommendPageDispatcher",["Arbiter","ExplicitRegistrationReactDispatcher","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Arbiter").subscribe("pageRecommendation/recommendChange",function(a,b){d.dispatchRecommendChange(b.pageID,b.recommendStatus)}));return d}var d=c.prototype;d.dispatchRecommendChange=function(a,b){this.dispatch({type:"recommend_changed",data:{pageID:a,recommendStatus:b}})};return c}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a({strict:!0})}),null);
__d("PagesRecommendPageStore",["FluxReduceStore","PagesRecommendPageDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return{}};c.reduce=function(a,b){a=babelHelpers["extends"]({},a);switch(b.type){case"init_data":case"recommend_changed":a[b.data.pageID]=b.data.recommendStatus;break}return a};return b}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("PagesRecommendPageDispatcher"))}),null);
__d("PagesHeaderRecommendPageButtonContainer.react",["FluxContainer","PagesHeaderRecommendPageButton.react","PagesRecommendPageDispatcher","PagesRecommendPageStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("PagesRecommendPageStore")]};c.calculateState=function(a,c){a=b("PagesRecommendPageStore").getState();return{isRecommended:a[c.pageID]}};function c(c){var d;d=a.call(this,c)||this;b("PagesRecommendPageDispatcher").explicitlyRegisterStores([b("PagesRecommendPageStore")]);b("PagesRecommendPageDispatcher").dispatch({data:c,type:"init_data"});return d}var d=c.prototype;d.render=function(){return b("React").jsx(b("PagesHeaderRecommendPageButton.react"),{canRecommendWithType:this.props.canRecommendWithType,isRecommended:this.state.isRecommended,pageID:this.props.pageID,pageURIToken:this.props.pageURIToken})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesActionBarChannel.react",["cx","InlineLoginDialogWrapper.react","PageActionBarActionSelector.react","PageActionContainer.react","PageCallToActionRef","PageCTAAction.react","PagesHeaderFollowButtonContainer.react","PagesHeaderGamesNotificationContainer.react","PagesHeaderLikeButtonContainer.react","PagesHeaderRecommendPageButtonContainer.react","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","SEOInlineLoginDialogGating.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();return b("React").jsxs("div",{className:"_5hgz"+(a.videoPageThemeColor==null?" _51xa":""),children:[a.primaryFollowButtonInBar!=null&&a.videoPageThemeColor!=null&&b("React").jsx(b("PagesHeaderFollowButtonContainer.react"),babelHelpers["extends"]({},a.likeFollowData,{asPrimaryButton:"false",videoPageThemeColor:a.videoPageThemeColor})),a.customActionsData.slice(0,a.numberOfActionBarButtons).map(function(c,d){b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_ACTIONS,"pages__header__action_bar",["page_consumer_experience"],{action:c.__typename});switch(c.__typename){case"PageLikeAction":return{element:b("React").createElement(b("PagesHeaderLikeButtonContainer.react"),babelHelpers["extends"]({},a.likeFollowData,{hideButtonText:a.hideButtonText,key:c.__typename+d,logAction:c.__typename,size:"large",videoPageThemeColor:a.videoPageThemeColor})),isCTAAction:!1};case"PageFollowAction":return{element:b("React").createElement(b("PagesHeaderFollowButtonContainer.react"),babelHelpers["extends"]({},a.likeFollowData,{asPrimaryButton:"false",key:c.__typename+d,logAction:c.__typename,size:"large",videoPageThemeColor:a.videoPageThemeColor})),isCTAAction:!1};case"PageGetGamesNotificationAction":return{element:b("React").createElement(b("PagesHeaderGamesNotificationContainer.react"),babelHelpers["extends"]({},a.likeFollowData,{key:c.__typename+d})),isCTAAction:!1};case"PageCTAAction":return{element:b("React").createElement(b("PageCTAAction.react"),babelHelpers["extends"]({},c,{className:"_rfh",key:c.__typename+d,surface:b("PageCallToActionRef").PAGES_ACTION_BAR_CHANNEL})),isCTAAction:!0};case"PageRecommendPageAction":return{element:b("React").createElement(b("PagesHeaderRecommendPageButtonContainer.react"),babelHelpers["extends"]({},a.recommendData,{key:c.__typename+d})),isCTAAction:!1};default:c.hideButtonText=a.hideButtonText;return{element:b("React").jsx(b("PageActionContainer.react"),{action:c,className:"_rfh _17q_",pageID:a.pageID,size:"large",videoPageThemeColor:a.videoPageThemeColor},c.__typename+d),isCTAAction:!1}}}).map(function(c,d){return a.next!=null&&!c.isCTAAction?b("React").jsx(b("InlineLoginDialogWrapper.react"),{SEOInlineLoginDialogGatingPayload:b("SEOInlineLoginDialogGating.react").seoPagesLoginPrompt,next:a.next,children:c.element},d):c.element}),b("React").jsx(b("PageActionBarActionSelector.react"),{actions:a.customActionsData.slice(a.numberOfActionBarButtons),pageID:a.pageID,videoPageThemeColor:a.videoPageThemeColor})]})};e.exports=a}),null);
__d("PagesActionsUnitStore",["FluxReduceStore","PagesHeaderDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return{callToAction:null,likeFollowData:null,recommendData:null,messageData:null,moreMenuItemConfigs:[],pageID:"0",customActionsData:[],numberOfActionBarButtons:3,primaryFollowButtonInBar:!1,hideButtonText:!1,videoPageThemeColor:null}};c.reduce=function(a,b){switch(b.type){case"actions_unit_data":return babelHelpers["extends"]({},a,b.data);case"update_video_page_theme_color":return babelHelpers["extends"]({},a,{videoPageThemeColor:b.videoPageThemeColor})}return a};return b}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("PagesHeaderDispatcher"))}),null);
__d("PagesActionBarChannelContainer.react",["FluxContainer","PagesActionBarChannel.react","PagesActionsUnitStore","PagesHeaderDispatcher","PagesHeaderFollowButtonContainer.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesActionsUnitStore")]};c.calculateState=function(){return b("PagesActionsUnitStore").getState()};var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("PagesHeaderDispatcher").explicitlyRegisterStore(b("PagesActionsUnitStore")),b("PagesHeaderDispatcher").dispatch({data:this.props,type:"actions_unit_data"})};d.render=function(){var a=this.state.primaryFollowButtonInBar,c=this.state.videoPageThemeColor;return b("React").jsxs("div",{children:[a===!0&&(c===null||c===""||c===void 0)?b("React").jsx(b("PagesHeaderFollowButtonContainer.react"),babelHelpers["extends"]({},this.state.likeFollowData,{asPrimaryButton:"true"})):null,b("React").jsx(b("PagesActionBarChannel.react"),babelHelpers["extends"]({},this.state))]})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("OptimisticVideoProgressBar.react",["cx","fbt","Arbiter","AsyncRequest","BUIProgressBar.react","ChannelConstants","React","Run","VideoUploadProgressUtils","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=5e3,j="video_encode";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={videoProgress:0,completed:!1,encodeToken:{}},d.inactivityTimer=null,d.stopInactivityTimer=function(){clearTimeout(d.inactivityTimer)},d.resetInactivityTimer=function(a){d.stopInactivityTimer(),d.inactivityTimer=d.startInactivityTimer(a)},d.getChannelType=function(){return b("ChannelConstants").getArbiterType(j)},d.onEncodeFinished=function(){d.stopInactivityTimer(),d.state.encodeToken.unsubscribe(),d.setState({videoProgress:100,completed:!0})},d.onEncodeUpdate=function(a,c){if(String(c.obj.videoID)!==d.props.videoID)return;var e=b("VideoUploadProgressUtils").getUpdatedProgress(c,{progress:d.state.videoProgress,progressWithoutFake:d.state.videoProgress});d.setState(function(a,d){return{videoProgress:e.progress,completed:a.completed||b("VideoUploadProgressUtils").isEncodingFinished(c.obj.stage)}});b("VideoUploadProgressUtils").isEncodingFinished(c.obj.stage)?d.onEncodeFinished():d.resetInactivityTimer(d.props.videoID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=b("Arbiter").subscribe(this.getChannelType(),this.onEncodeUpdate);b("Run").onLeave(function(){return a.unsubscribe()});this.inactivityTimer=this.startInactivityTimer(this.props.videoID);this.setState({encodeToken:a})};d.componentWillUnmount=function(){this.state.encodeToken.unsubscribe(),this.stopInactivityTimer()};d.componentDidUpdate=function(a,b){!b.completed&&this.state.completed&&this.onComplete()};d.checkVideoStatus=function(a){var c=this;new(b("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:a}).setHandler(function(b){b=b.getPayload();b.is_ready?c.onEncodeFinished(a):c.inactivityTimer=c.startInactivityTimer(a)}).send()};d.startInactivityTimer=function(a){return setTimeout(this.checkVideoStatus.bind(this,a),i)};d.onComplete=function(){b("Arbiter").inform(this.props.onReadyEvent,{videoID:this.props.videoID,videoAssetID:this.props.videoAssetID,source:this.props.source})};d.render=function(){var a=h._("FINISHED"),c=h._("PROCESSING");a=this.state.completed?a:c;return b("React").jsx(b("BUIProgressBar.react"),{className:b("joinClasses")("_33bk",this.props.className),message:a,isComplete:this.state.completed,percentage:this.state.videoProgress,width:this.props.width})};return c}(b("React").Component);a.propTypes={videoID:b("prop-types").string.isRequired,videoAssetID:b("prop-types").string||null,width:b("prop-types").number.isRequired,onReadyEvent:b("prop-types").string.isRequired,source:b("prop-types").string};e.exports=a}),null);
__d("XPagesMessagePageOwnerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/send_page_message/",{message:{type:"String",required:!0},page_id:{type:"String",required:!0}})}),null);
__d("PageContentTabMessageOwnerDialog",["cx","fbt","AbstractTextArea.react","AsyncRequest","LayerFadeOnHide","PageContentTabSuccessDialog.react","PageContentTabSuccessDialogTimer","React","ReactDOM","XPagesMessagePageOwnerController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","nullthrows","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=5,j=b("PageContentTabSuccessDialogTimer").TIME_IN_MS,k=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.state={messageText:null,isSendingMessage:!1},d.$1=null,d.$2=function(){d.$1&&d.setState({messageText:d.$1.getValue()})},d.$3=function(){d.setState({isSendingMessage:!0});var a=b("XPagesMessagePageOwnerController").getURIBuilder().setString("message",b("nullthrows")(d.$1).getValue()).setString("page_id",b("nullthrows")(d.props.pageID)).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a=a.getPayload().threadID;d.setState({isSendingMessage:!1,messageText:null});d.props.onMessageThreadInitiated&&d.props.onMessageThreadInitiated(a)}).setErrorHandler(function(){d.setState({isSendingMessage:!1})}).setFinallyHandler(function(a){d.props.callbackParent(!0)}).send()},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.render=function(){var a=this,c;return(c=b("React")).jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},shown:!0,width:500,children:[c.jsx(b("XUIDialogTitle.react"),{children:c.jsxs("div",{children:[h._("Message to"),"\xa0",this.props.username]})}),c.jsx(b("XUIDialogBody.react"),{children:c.jsx(b("AbstractTextArea.react"),{autoFocus:!0,className:"_3k3a",disabled:this.state.isSendingMessage,ref:function(b){return a.$1=b},onChange:this.$2,placeholder:h._("Send a message to {Account Name}",[h._param("Account Name",this.props.username)]),rows:i})}),c.jsx(b("XUIDialogFooter.react"),{children:c.jsx(b("XUIDialogButton.react"),{action:"confirm",disabled:this.state.isSendingMessage||this.state.messageText==null||this.state.messageText.trim().length===0,label:h._("Send Message"),onClick:this.$3,use:"confirm"})})]})};return a}(b("React").Component);k.propTypes={existingThreadID:(a=b("prop-types")).string,username:a.string,callbackParent:a.func,onChatThreadOpen:a.func,onMessageThreadInitiated:a.func};c={onChildChanged:function(a){a===!0&&this.hideWithSuccessMessage("Message Sent!")},show:function(a,c){var d=this;this._container||(this._container=document.createElement("div"));b("ReactDOM").render(b("React").jsx(k,{username:a,pageID:c,callbackParent:function(a){return d.onChildChanged(a)}}),this._container)},hide:function(){if(!this._container)return;this.destroy()},hideWithSuccessMessage:function(a){if(!this._container)return;b("ReactDOM").render(b("React").jsx(b("PageContentTabSuccessDialog.react"),{successLabel:a}),this._container);setTimeout(this.destroy.bind(this),j)},destroy:function(){b("ReactDOM").unmountComponentAtNode(this._container),this._container=null}};e.exports=c}),null);
__d("XPageCreationAsyncDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/create/dialog/",{ref_page_id:{type:"FBID"},ref_type:{type:"String"},draft_page_name:{type:"String"}})}),null);
__d("PageCreatePageButton.react",["fbt","AsyncRequest","InlineLoginDialogWrapper.react","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","SEOInlineLoginDialogGating.react","XPageCreationAsyncDialogController","XUIButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PagesLogger").log(String(d.props.fbid),b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").CREATE_PAGE_BUTTON);var a=b("XPageCreationAsyncDialogController").getURIBuilder().setFBID("ref_page_id",d.props.fbid).setString("ref_type","page_profile_button").getURI();new(b("AsyncRequest"))().setURI(a).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("PagesLogger").log(String(this.props.fbid),b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").CREATE_PAGE_BUTTON)};d.render=function(){return b("React").jsx(b("InlineLoginDialogWrapper.react"),{SEOInlineLoginDialogGatingPayload:b("SEOInlineLoginDialogGating.react").seoPagesLoginPrompt,next:this.props.next,children:b("React").jsx(b("XUIButton.react"),{label:g._("Create a Page"),onClick:this.$1,use:"special"})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesCoverCameraButton.react",["cx","fbt","Link.react","PagesNuxFrameworkHelper","React","XUIAmbientNUX.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showCoverSlideshowMenuOptionNux:!1,showOnTourBadgeMenuOptionNux:!1,cameraButtonRef:null},d.$1=function(a){if(a===null)return;d.setState({cameraButtonRef:a})},d.$2=function(){return d.state.cameraButtonRef},d.$3=function(){d.state.showCoverSlideshowMenuOptionNux?b("PagesNuxFrameworkHelper").closeNux(5462,"page_timeline"):d.state.showOnTourBadgeMenuOptionNux&&b("PagesNuxFrameworkHelper").closeNux(5649,"page_timeline"),d.setState({showCoverSlideshowMenuOptionNux:!1,showOnTourBadgeMenuOptionNux:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.props.shouldShowCoverSlideshowMenuOptionNux?b("PagesNuxFrameworkHelper").registerNux(5462,"page_timeline",function(){return a.setState({showCoverSlideshowMenuOptionNux:!0})}):this.props.shouldshowOnTourBadgeMenuOptionNux&&b("PagesNuxFrameworkHelper").registerNux(5649,"page_timeline",function(){return a.setState({showOnTourBadgeMenuOptionNux:!0})})};d.$4=function(){return this.state.showOnTourBadgeMenuOptionNux?h._("Show tour info"):h._("New! Cover slideshow")};d.$5=function(){return this.state.showOnTourBadgeMenuOptionNux?h._("Add the name and dates of your tour on your Page's cover photo, video or slideshow."):h._("Show people who visit your Page even more of what's important to you with a cover slideshow. Select 'Create slideshow' in the cover photo area to get started.")};d.render=function(){return b("React").jsxs(b("Link.react"),{className:"_3oj-","data-testid":"cover_photo_edit_menu",children:[b("React").jsx(b("XUIAmbientNUX.react"),{alignment:"center",contextRef:this.$2,onCloseButtonClick:this.$3,position:"right",shown:(this.state.showCoverSlideshowMenuOptionNux||this.state.showOnTourBadgeMenuOptionNux)&&!!this.state.cameraButtonRef,width:"normal",children:b("React").jsxs("div",{children:[b("React").jsx(b("XUIText.react"),{display:"block",weight:"bold",children:this.$4()}),this.$5()]})}),b("React").jsxs("div",{className:"_3oj_"+(this.props.expanded?" _3ok0":""),ref:this.$1,children:[b("React").jsx("div",{className:"_3ok1",children:b("React").jsx("div",{className:"_4eqf _4eqi"})}),b("React").jsx("div",{className:"_3ok2",children:b("React").jsx("span",{className:"_3ok3",children:this.props.label})})]})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesBlueCrossAddStoryButton.react",["ix","cx","ActorURI","AsyncRequest","Image.react","PageContentTabLoadingDialog","React","ShimButton.react","XPagesComposerDialogController","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=g("489388"),j=g("624751");function k(a){switch(a){case"small":return i;default:return j}}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(){c.$1()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$1=function(){var a=this.props.pageID;if(a===null||a===void 0)return;b("PageContentTabLoadingDialog").show();var c=b("XPagesComposerDialogController").getURIBuilder().setString("entry_point","pages_profile_pic_add_story").getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(c,a)).setHandler(function(){b("PageContentTabLoadingDialog").hide()}).send()};d.render=function(){var a=this.props,c=a.borderWidth,d=a.bottomRightMargin;a=a.size;d="_6usj"+(d==="margin-4"?" margin-4":"")+(d==="margin-8"?" margin-8":"")+(c==="thin"?" border-thin":"")+(c==="thick"?" border-thick":"")+(a==="small"?" size-small":"")+(a==="normal"?" size-normal":"");return b("React").jsx(b("ShimButton.react"),{className:"_6uxp",onClick:this.$2,children:b("React").jsx("div",{className:d,children:b("React").jsx(b("Image.react"),{src:k(a)})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesCircularProfilePictureOverlay.react",["ix","cx","fbt","FDSText.react","Image.react","Link.react","React","XPhotoPermalinkController","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i._("View Photo"),k=i._("Update"),l=i._("Add a Picture"),m=i._("Options");function n(a){if(!a.canViewerEdit){var c;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx(b("Image.react"),{src:g("504208")})}),c.jsx(b("FDSText.react"),{color:"white",size:"body3",weight:"bold",children:j})]})}return a.showStoryRing?b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{children:b("React").jsx(b("Image.react"),{src:g("492300")})}),b("React").jsx("div",{className:"_6y7_",children:b("React").jsx(b("FDSText.react"),{color:"white",size:"body3",weight:"bold",children:m})}),b("React").jsx("div",{className:"_6y1q",children:b("React").jsx(b("Image.react"),{src:g("483253")})})]}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{children:b("React").jsx(b("Image.react"),{src:g("681203")})}),b("React").jsx(b("FDSText.react"),{color:"white",size:"body3",weight:"bold",children:a.hasProfilePhoto?k:l})]})}function a(a){__p&&__p();var c=a.canViewerEdit,d=a.profilePictureData,e=a.showStoryRing;a=a.onOverlayClick;var f=d.photoID;d=d.photoSourcePageID;if((!e||f==null)&&!c)return null;e=b("React").jsx("div",{className:"_6v9b",children:b("React").jsx("div",{className:"_6v8o"+(e?" size-small":"")+(e?"":" size-large"),children:b("React").jsx("div",{className:"_6w7n",children:b("React").jsx(n,{canViewerEdit:c,hasProfilePhoto:f!==null,showStoryRing:e})})})});if(!c){c=b("XPhotoPermalinkController").getURIBuilder().setInt("photo_id",f).setString("vanity",d).getURI();return b("React").jsx(b("Link.react"),{"aria-label":i._("Profile picture"),className:"_2dgj",href:c,rel:"theater",children:e})}return b("React").jsx(b("Link.react"),{"aria-label":i._("Update menu"),className:"_2dgj",onClick:a,children:e})}e.exports=a}),null);
__d("PagesProfilePictureLink.react",["cx","fbt","Link.react","React","VideoData","XPhotoPermalinkController","XVideoPermalinkController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=a.children,d=a.loading,e=a.photoSourcePageID,f=a.photoID,g=a.videoData;g=g!==null?new(b("VideoData"))(g).getVideoID():null;if(f===null&&g===null||d)return b("React").Children.only(c);d=null;g!==null?d=b("XVideoPermalinkController").getURIBuilder().setString("vanity",e).setInt("video_id",g).getURI():d=b("XPhotoPermalinkController").getURIBuilder().setInt("photo_id",f).setString("vanity",e).getURI();return b("React").jsx(b("Link.react"),{"aria-label":h._("Profile picture"),className:"_2dgj",href:d,rel:"theater",children:a.children})};e.exports=a}),null);
__d("XProfilePicCameraPhotoController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/camera_photo_dialog/",{profile_id:{type:"Int",required:!0},source:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XProfilePicMenuDialogEditThumbnailController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/menu_dialog/edit_thumbnail/",{profile_id:{type:"FBID",required:!0}})}),null);
__d("XProfilePicRemoveDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/remove_dialog/",{profile_id:{type:"Int",required:!0},delete_from_album:{type:"Bool",defaultValue:!1},__asyncDialog:{type:"Int"}})}),null);
__d("PagesProfilePictureStoryEditMenu.react",["cx","fbt","ActorURI","FBStoriesActions","FBStoriesStore","FBStoriesViewer2","FDSText.react","FileInput.react","FileInputUploader","Link.react","PagesProfilePictureActions","React","ReactDOM","StoriesLoggingConstants","SUIActionMenu.react","SUIBusinessTheme","XPagesProfilePictureUploadAsyncController","XPhotoBrowserDialogController","XPhotoPermalinkController","XProfilePicCameraPhotoController","XProfilePicMenuDialogEditThumbnailController","XProfilePicRemoveDialogController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("PagesProfilePictureActions").updateProfilePicture,j=h._("Choose from Photos"),k=h._("Take Photo"),l=h._("Upload Photo"),m=h._("Edit Thumbnail"),n=h._("Remove"),o=h._("Update Profile Photo"),p=h._("Add Profile Photo"),q=h._("View Profile Photo"),r=h._("View Story"),s=h._("Profile picture"),t=h._("Page stories");function u(a,b){return b!==a}function v(a){return b("React").jsx(b("FileInput.react"),{accept:"image/*",containerClassName:"_6xfx","data-testid":"profile_picture_upload_menu_item",display:"inline-block",name:"profile_pic",onChange:a.onUploadPhoto,ref:a.fileInputRef,children:b("React").jsx(b("Link.react"),{className:"_6xfx",href:"#",children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:l})})})}function w(a){return b("React").jsx(b("Link.react"),{ajaxify:a.uri,className:"_6xfx",href:"#",rel:"dialog",children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:a.labelText})})}function x(a){a=a.profilePictureData;var c=a.pageID,d=a.photoID;a=a.photoSourcePageID;d=b("XPhotoPermalinkController").getURIBuilder().setInt("photo_id",d).setString("vanity",a).getURI();return b("React").jsx(b("Link.react"),{"aria-label":s,className:"_6xfx",href:b("ActorURI").create(d,c),rel:"theater",children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",weight:"bold",children:q})})}function y(a){return b("React").jsx(b("Link.react"),{"aria-label":t,className:"_6xfx",onClick:a.onViewStoryClick,children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",weight:"bold",children:r})})}function z(a,c){return!a?null:b("XPhotoBrowserDialogController").getURIBuilder().setEnum("endpoint",4).setEnum("generator",1).setString("data","pages_profile_picture").setInt("id",c).getURI()}function A(a){var c=b("XProfilePicCameraPhotoController").getURIBuilder().setInt("profile_id",a).setString("source","timeline").getURI();return b("ActorURI").create(c,a)}function B(a){var c=a.pageID,d=a.photoID,e=a.photoIsSquare;a=a.photoSourcePageID;if(d===null||e||u(c,a))return null;d=b("XProfilePicMenuDialogEditThumbnailController").getURIBuilder().setFBID("profile_id",c).getURI();return b("ActorURI").create(d,c)}function C(a){var c=a.pageID,d=a.photoID;a=a.photoSourcePageID;if(d===null||u(c,a))return null;d=b("XProfilePicRemoveDialogController").getURIBuilder().setInt("profile_id",c).getURI();return b("ActorURI").create(d,c)}function D(a,c,d,e){__p&&__p();var f=c.pageID,g=c.pageHasPhotos,h=[];g=z(g,f);g!==null&&h.push({type:"item",label:b("React").jsx(w,{labelText:j,uri:g}),onClick:d});h.push({type:"item",label:b("React").jsx(w,{labelText:k,uri:A(f)}),onClick:d});h.push({type:"item",label:b("React").jsx(v,{fileInputRef:a,onUploadPhoto:e}),onClick:function(){}});g=B(c);g!==null&&h.push({type:"item",label:b("React").jsx(w,{labelText:m,uri:g}),onClick:d});f=C(c);f!==null&&h.push({type:"item",label:b("React").jsx(w,{labelText:n,uri:f}),onClick:d});return h}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=b("React").createRef(),d.$3=function(){var a=d.props,c=a.profilePictureData;a=a.onMenuClick;c=c.pageID;i();c=b("ActorURI").create(b("XPagesProfilePictureUploadAsyncController").getURIBuilder().setFBID("page_id",c).getURI(),c);new(b("FileInputUploader"))(b("ReactDOM").findDOMNode(d.$2.current)).setURI(c).setAllowCrossOrigin(!0).send();a()},d.$4=function(){var a=d.props.bucketID;if(a!==null&&a!==void 0){var c=b("FBStoriesActions").userSelectedBucket(a)&&b("FBStoriesStore").getThreadCountForSelectedBucket()>0;c&&b("FBStoriesViewer2").open({bucketID:a,openSource:b("StoriesLoggingConstants").ACTION_SOURCE.PAGE_PROFILE,cardID:null,traySessionID:null})}},d.$5=function(a){d.$1=a},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1&&this.$1.focus()};d.render=function(){var a=this.props,c=a.profilePictureData,d=a.showCircularLoader,e=a.showStoryRing,f=a.onMenuClick,g=a.onMouseEnterMenu,h=a.onMouseLeaveMenu;a=a.onOverlayBlur;var i=c.photoID,j=[],k=D(this.$2,c,f,this.$3),l=b("React").jsx(b("SUIActionMenu.react"),{items:k,theme:b("SUIBusinessTheme")});e&&(j.push({type:"item",label:b("React").jsx(y,{onViewStoryClick:this.$4}),onClick:f}),i!==null&&j.push({type:"item",label:b("React").jsx(x,{profilePictureData:c}),onClick:f}),j.push({type:"group",label:i!==null?o:p,items:k}),l=b("React").jsx(b("SUIActionMenu.react"),{items:j,theme:b("SUIBusinessTheme")}));return b("React").jsx("div",{className:"_6xgp"+(!e&&!d?" small-padding":"")+(e||d?" large-padding":""),onBlur:a,onMouseEnter:g,onMouseLeave:h,ref:this.$5,tabIndex:"0",children:l})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesProfilePictureStoryLink.react",["cx","fbt","FBStoriesActions","FBStoriesStore","FBStoriesViewer2","Link.react","React","StoriesLoggingConstants"],(function(a,b,c,d,e,f,g,h){"use strict";var i=h._("Page stories");function a(a){var c=a.bucketID;a=a.children;var d=function(){b("FBStoriesActions").userSelectedBucket(c)&&b("FBStoriesStore").getThreadCountForSelectedBucket()>0&&b("FBStoriesViewer2").open({bucketID:c,openSource:b("StoriesLoggingConstants").ACTION_SOURCE.PAGE_PROFILE,cardID:null,traySessionID:null})};return b("React").jsx(b("Link.react"),{"aria-label":i,className:"_2dgj",onClick:d,children:a})}e.exports=a}),null);
__d("PagesCircularProfilePicture.react",["cx","Image.react","PagesBlueCrossAddStoryButton.react","PagesCircularProfilePictureOverlay.react","PagesProfilePictureActions","PagesProfilePictureLink.react","PagesProfilePictureStoryEditMenu.react","PagesProfilePictureStoryLink.react","PagesStoryCreationStatusTypes","ProfileHeaderSpinner.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesProfilePictureActions").updateProfilePictureStory,i=172,j=156;function k(a){var c=a.canViewerEdit,d=a.overlayShown,e=a.profilePictureData,f=a.showCircularLoader,g=a.showStoryRing,h=a.storyBucket,k=a.onMouseEnterProfilePicture,l=a.onMouseLeaveProfilePicture;a=a.onOverlayClick;var m=e.loading,n=e.uri,o=f||g?j:i;n=b("React").jsx("div",{className:"_6tay",style:{width:o,height:o},children:b("React").jsx(b("Image.react"),{className:"_6tb5"+(m?" _179t":""),height:o,src:n,width:o})});return b("React").jsxs("div",{className:"_6taw",children:[b("React").jsxs("div",{className:"_6tax",onMouseEnter:k,onMouseLeave:l,children:[g?b("React").jsx(b("PagesProfilePictureStoryLink.react"),{bucketID:h.bucketID,children:n}):b("React").jsx(b("PagesProfilePictureLink.react"),babelHelpers["extends"]({},e,{children:n})),!m&&d&&b("React").jsx(b("PagesCircularProfilePictureOverlay.react"),{canViewerEdit:c,onOverlayClick:a,profilePictureData:e,showStoryRing:g||f})]}),b("React").jsx(b("ProfileHeaderSpinner.react"),{shown:m})]})}c=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){__p&&__p();var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=c.call.apply(c,[this].concat(f))||this,d.state={menuShown:!1,mouseOnMenu:!1,overlayShown:((a=d.props)!=null?(a=a.profilePictureData)!=null?a.photoID:a:a)===null},d.$1=function(){d.setState({overlayShown:!0})},d.$2=function(){var a;((a=d.props)!=null?(a=a.profilePictureData)!=null?a.photoID:a:a)!==null&&d.setState({overlayShown:!1})},d.$3=function(){d.setState({mouseOnMenu:!0})},d.$4=function(){d.setState({mouseOnMenu:!1})},d.$5=function(){var a=d.state.menuShown;a&&d.$4();d.setState({menuShown:!a})},d.$6=function(a){__p&&__p();var b;b=(b=a)!=null?b.relatedTarget:b;a=(a=a)!=null?a.currentTarget:a;if(b instanceof HTMLElement&&a instanceof HTMLElement){b=b&&b.parentElement;var c=b&&b.parentElement;if(b===a||c===a)return}((b=d.props)!=null?(b=b.profilePictureData)!=null?b.photoID:b:b)!==null&&!d.state.mouseOnMenu&&!d.state.overlayShown&&d.setState({menuShown:!1,mouseOnMenu:!1,overlayShown:!1})},b)||babelHelpers.assertThisInitialized(d)}var e=d.prototype;e.shouldComponentUpdate=function(a){__p&&__p();var c,d;d=(d=this.props)!=null?(d=d.profilePictureData)!=null?d.profilePicStoryData:d:d;c=(c=a)!=null?(c=c.profilePictureData)!=null?c.profilePicStoryData:c:c;if(!c)return!0;c=c.get("storyCreationStatus");if(c===b("PagesStoryCreationStatusTypes").STORY_CREATION_SUCCESS){d=!!d&&d.get("storyCreationStatus");d=d===b("PagesStoryCreationStatusTypes").STORY_CREATION_STARTED&&c!==b("PagesStoryCreationStatusTypes").STORY_CREATION_STARTED;if(d){return((c=a)!=null?(c=c.storyBucket)!=null?c.latestThreadCreationTime:c:c)!==((d=this.props)!=null?(d=d.storyBucket)!=null?d.latestThreadCreationTime:d:d)}else return!!a.storyBucket}return!0};e.componentDidUpdate=function(a){!a.storyBucket&&!!this.props.storyBucket&&h(null)};e.render=function(){var a,c,d=this.props,e=d.profilePictureData;d=d.storyBucket;c=(c=e)!=null?c.profilePicStoryData:c;a=!!((a=e)!=null?a.editable:a);c=!!c&&c.get("storyCreationStatus")===b("PagesStoryCreationStatusTypes").STORY_CREATION_STARTED;var f=this.state,g=f.overlayShown;f=f.menuShown;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsxs("div",{className:"_6taw"+(!!d||c?" _6tv-":"")+(c?" _6zia":"")+(!!d&&d.hasUnseenThreads?" _6two":""),children:[b("React").jsx(k,{canViewerEdit:a,onMouseEnterProfilePicture:this.$1,onMouseLeaveProfilePicture:this.$2,onOverlayClick:this.$5,overlayShown:g||f,profilePictureData:e,showCircularLoader:c,showStoryRing:!!d,storyBucket:d}),c&&b("React").jsx("div",{className:"_6zg7"}),a?b("React").jsx(b("PagesBlueCrossAddStoryButton.react"),{bottomRightMargin:!!d||c?"margin-4":"margin-8",pageID:e.pageID,size:"normal"}):null]}),f&&b("React").jsx(b("PagesProfilePictureStoryEditMenu.react"),{bucketID:d?d.bucketID:null,onMenuClick:this.$5,onMouseEnterMenu:this.$3,onMouseLeaveMenu:this.$4,onOverlayBlur:this.$6,profilePictureData:e,showCircularLoader:c,showStoryRing:!!d})]})};return d}(b("React").Component);e.exports=c}),null);
__d("PagesCircularProfilePictureContainer.react",["CurrentUser","FBStoriesActions","FBStoriesDispatcher","FBStoriesStore","FBStoriesViewerBucketQueryWebGraphQLQuery","FluxContainer","PagesCircularProfilePicture.react","PagesStoryCreationStatusTypes","React","WebGraphQL","fbStoriesRootSelectors","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("FBStoriesStore")]};c.calculateState=function(){var a=b("FBStoriesStore").getState();return{storyBucketDescriptors:b("fbStoriesRootSelectors").bucketDescriptors(a)}};var d=c.prototype;d.componentDidMount=function(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesStore")]);var a=this.state.storyBucketDescriptors;a=a&&a[0];a||this.$1()};d.componentDidUpdate=function(a,c){a=this.state.storyBucketDescriptors;a=a&&a[0];c=c.storyBucketDescriptors&&c.storyBucketDescriptors[0];!!c&&!a&&this.$1();c=(c=this.props)!=null?(c=c.profilePictureData)!=null?c.profilePicStoryData:c:c;c=!!c&&c.get("storyCreationStatus");c===b("PagesStoryCreationStatusTypes").STORY_CREATION_SUCCESS&&!a&&this.$1()};d.componentWillUnmount=function(){b("FBStoriesActions").resetStore()};d.$1=function(){var a=this,c;c=(c=this.props)!=null?(c=c.profilePictureData)!=null?c.profilePicStoryData:c:c;c=c&&c.get("bucketID");if(c===null||c===void 0)return;c=new(b("FBStoriesViewerBucketQueryWebGraphQLQuery"))({bucketID:c,threadCount:100});b("promiseDone")(b("WebGraphQL").exec(c),function(b){return a.$2(b)},function(b){return a.$3(b)})};d.$2=function(a){a=(a=a)!=null?a.node:a;if(a===null||a===void 0)return;b("FBStoriesActions").loadData(b("CurrentUser").getName(),b("CurrentUser").getID(),null,null,[a])};d.$3=function(a){};d.render=function(){var a=this.state.storyBucketDescriptors;return b("React").jsx(b("PagesCircularProfilePicture.react"),{profilePictureData:this.props.profilePictureData,storyBucket:a&&a[0]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesProfilePictureStore",["FluxReduceStore","PagesHeaderDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{currentCoverType:"cover_photo",editable:!1,loading:!1,modules:{PagesProfilePictureEditMenu:null},pageHasPhotos:!1,pageID:"0",photoID:null,photoIsSquare:!0,photoSourcePageID:"0",size:0,uri:null,videoData:null,isShowPageProfileInHeader:!1,profilePicStoryData:null}};d.reduce=function(a,c){__p&&__p();var d;switch(c.type){case"profile_picture_data":return babelHelpers["extends"]({},a,c.data,{profilePicStoryData:b("immutable").fromJS((d=c)!=null?(d=d.data)!=null?d.profilePicStoryData:d:d)});case"profile_picture_update":return babelHelpers["extends"]({},a,c.data);case"profile_picture_story_uploading":var e;d=a.profilePicStoryData;if(!d)return babelHelpers["extends"]({},a);e=(e=c)!=null?(e=e.data)!=null?e.profilePicStoryData:e:e;d=d.set("storyCreationStatus",!!e&&e.get("storyCreationStatus"));return babelHelpers["extends"]({},a,c.data,{profilePicStoryData:d})}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("PagesHeaderDispatcher"))}),null);
__d("PagesProfilePictureContainer.react",["FluxContainer","PagesCircularProfilePictureContainer.react","PagesHeaderDispatcher","PagesProfilePictureStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("PagesProfilePictureStore")]};c.calculateState=function(){return b("PagesProfilePictureStore").getState()};function c(c){c=a.call(this,c)||this;b("PagesHeaderDispatcher").explicitlyRegisterStore(b("PagesProfilePictureStore"));b("PagesHeaderDispatcher").dispatch({data:c.props,type:"profile_picture_data"});return c}var d=c.prototype;d.render=function(){return b("React").jsx(b("PagesCircularProfilePictureContainer.react"),{profilePictureData:this.state})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesUsername.react",["ix","cx","fbt","BootloadedComponent.react","ChatOpenTabEventLogger","FantaTabActions","Image.react","JSResource","Link.react","LoadingDialog.react","MercuryIDs","PageContentTabMessageOwnerDialog","React","TooltipLink.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={showDialog:!1};return b}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.username;if(c!=null)return this.props.isMessagingEnabled?b("React").jsx(b("TooltipLink.react"),{className:"_2wmb",href:"#",onClick:this.$1(),position:"below",tooltip:this.$2(c),children:b("React").jsxs("span",{children:[b("React").jsx(b("Image.react"),{className:"_3mj1",src:g("123858")}),"@"+c]})}):b("React").jsx(b("TooltipLink.react"),{className:"_2wmb",href:"#",position:"below",tooltip:this.$2(c),children:"@"+c});if(!this.props.editable)return null;var d=null;this.state.showDialog&&(d=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("PageUsernameEditDialog.react").__setRef("PagesUsername.react"),bootloadPlaceholder:b("React").jsx(b("LoadingDialog.react"),{}),existingUsername:c,onDialogToggle:function(b){a.setState({showDialog:b})},pageID:this.props.pageID,pageName:this.props.name,profilePictureSrc:this.props.usernameEditDialogProfilePictureURI}));return b("React").jsxs("div",{children:[b("React").jsx(b("Link.react"),{className:"_2wmb",onClick:function(){a.setState({showDialog:!0})},children:i._("Create Page \u0040username")}),d]})};d.$2=function(a){return this.props.editable&&!this.props.isMessagingEnabled?i._("People can search for {username of a Page} to find your Page easily. You can change your \u0040username in the Page Info section.",[i._param("username of a Page","@"+a)]):this.props.isMessagingEnabled&&this.props.editable?i._("Send {username of a Page} a message.",[i._param("username of a Page","@"+a)]):i._("Search for {username of a Page} on Facebook or in Messenger to find this Page easily.",[i._param("username of a Page","@"+a)])};d.$1=function(){__p&&__p();var a=this,c=this.props.isMessagingEnabled&&!this.props.showModal,d=this.props.isMessagingEnabled&&this.props.showModal;if(d)return function(c){b("PageContentTabMessageOwnerDialog").show(a.props.name,a.props.pageID)};else if(c)return function(c){c=b("MercuryIDs").getThreadIDFromUserID(a.props.pageID);b("FantaTabActions").openTab(c);b("ChatOpenTabEventLogger").logUserClickOpen("page_username",a.props.pageID)};return null};return c}(b("React").Component);e.exports=a}),null);